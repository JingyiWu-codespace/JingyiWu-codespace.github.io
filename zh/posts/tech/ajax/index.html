<html lang="zh" dir=" auto">

<!DOCTYPE html>

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>å­¦ä¹ ï¼šAJAX  | Jingyi&#39;s Blog</title>
<meta name="keywords" content="AJAX">
<meta name="description" content="axios,API, XMLHttpRequest, asyn, await, Promise, EventLoop,">
<meta name="author" content="Jingyi Wu">
<link rel="canonical" href="https://jingyiwu-codespace.github.io/zh/posts/tech/ajax/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.bb17103716ce748824407fb65cb4ad0bab7144d7fdd69db82838a008c55e484e.css" integrity="sha256-uxcQNxbOdIgkQH&#43;2XLStC6txRNf91p24KDigCMVeSE4=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://jingyiwu-codespace.github.io/img/magic_rabbit_sixteen_icon.png">
<link rel="icon" type="image/png" sizes="16x16" href="https://jingyiwu-codespace.github.io/img/magic_rabbit_sixteen_icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://jingyiwu-codespace.github.io/img/magic_rabbit_sixteen_icon.png">
<link rel="apple-touch-icon" href="https://jingyiwu-codespace.github.io/img/magic_rabbit_sixteen_icon.png">
<link rel="mask-icon" href="https://jingyiwu-codespace.github.io/img/magic_rabbit_sixteen_icon.png">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="zh" href="https://jingyiwu-codespace.github.io/zh/posts/tech/ajax/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><head>

    <link href="https://fonts.cdnfonts.com/css/code-new-roman" rel="stylesheet">
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-7TPHQR7CHS"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'G-7TPHQR7CHS');
    </script>
    


</head>
  
    
      <script async src="https://www.googletagmanager.com/gtag/js?id=G-7TPHQR7CHS"></script>
      <script>
        var doNotTrack = false;
        if ( false ) {
          var dnt = (navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack);
          var doNotTrack = (dnt == "1" || dnt == "yes");
        }
        if (!doNotTrack) {
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'G-7TPHQR7CHS');
        }
      </script>
    
  

<meta property="og:title" content="å­¦ä¹ ï¼šAJAX " />
<meta property="og:description" content="axios,API, XMLHttpRequest, asyn, await, Promise, EventLoop," />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://jingyiwu-codespace.github.io/zh/posts/tech/ajax/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-03-23T00:00:00+00:00" />
<meta property="article:modified_time" content="2024-03-23T00:00:00+00:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="å­¦ä¹ ï¼šAJAX "/>
<meta name="twitter:description" content="axios,API, XMLHttpRequest, asyn, await, Promise, EventLoop,"/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "ğŸ“è®°å½•",
      "item": "https://jingyiwu-codespace.github.io/zh/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "ğŸ’» æŠ€æœ¯",
      "item": "https://jingyiwu-codespace.github.io/zh/posts/tech/"
    }, 
    {
      "@type": "ListItem",
      "position":  3 ,
      "name": "å­¦ä¹ ï¼šAJAX ",
      "item": "https://jingyiwu-codespace.github.io/zh/posts/tech/ajax/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "å­¦ä¹ ï¼šAJAX ",
  "name": "å­¦ä¹ ï¼šAJAX ",
  "description": "axios,API, XMLHttpRequest, asyn, await, Promise, EventLoop,",
  "keywords": [
    "AJAX"
  ],
  "articleBody": "Day 1 1. AJAX å¯¼å…¥ ä»€ä¹ˆæ˜¯AJAX ? å¼‚æ­¥çš„ JavaScript å’Œ XML (Asynchronous JavaScript And XML)\nä½¿ç”¨XMLHttpRequest å¯¹è±¡ä¸æœåŠ¡å™¨é€šä¿¡ï¼Œå¯ä»¥ä½¿ç”¨JSON/ XML/ HTML/ text æ–‡æœ¬ç­‰æ ¼å¼å‘é€å’Œæ¥å—æ•°æ®ã€‚\nAJAX æœ‰å¼‚æ­¥ç‰¹æ€§ï¼Œåœ¨ä¸é‡æ–°åˆ·æ–°é¡µé¢çš„æƒ…å†µä¸‹ä¸æœåŠ¡å™¨é€šä¿¡ï¼Œäº¤æ¢æ•°æ®ï¼Œæˆ–æ›´æ–°é¡µé¢\nä½¿ç”¨ AJAX ä½¿ç”¨ axios åº“ï¼Œä¸æœåŠ¡å™¨è¿›è¡Œæ•°æ®é€šä¿¡\nå°†XMLHttpRequestå°è£…ï¼Œä»£ç ç®€å•\nVue React é¡¹ç›®ä¸­éƒ½ä¼šä½¿ç”¨ axios\naxios({ url: 'http://hmajax.itheima.net/api/province' //'è¯·æ±‚çš„æœåŠ¡å™¨è¿æ¥' }).then(result)=\u003e{ // å¯¹æœåŠ¡å™¨è¿”å›çš„æ•°æ®åšåç»­å¤„ç† } å­¦ä¹ XMLHttpRequestå¯¹è±¡ï¼Œäº†è§£AJAXåº•å±‚åŸç†\n2. URL httpåè®®ï¼š è¶…æ–‡æœ¬ä¼ è¾“åè®®ï¼Œè§„å®šæµè§ˆå™¨å’ŒæœåŠ¡å™¨ä¹‹é—´ä¼ è¾“æ•°æ®çš„æ ¼å¼\nç½‘å€ï¼š http://hmajax.itheima.net/api/province\nç½‘å€ï¼šåè®®://åŸŸå/èµ„æºè·¯å¾„\nåç§° ç½‘å€ ä½œç”¨ åè®® http è§„å®šä¼ è¾“æ•°æ®çš„æ ¼å¼ åŸŸå hmajax.itheima.net æ ‡è®°æœåŠ¡å™¨åœ¨äº’è”ç½‘ä¸­çš„æ–¹ä½ èµ„æºè·¯å¾„ /api/province æ ‡è®°èµ„æºåœ¨æœåŠ¡å™¨ä¸‹çš„å…·ä½“ä½ç½® URL æŸ¥è¯¢å‚æ•°\næµè§ˆå™¨æä¾›ç»™æœåŠ¡å™¨çš„é¢å¤–ä¿¡æ¯ï¼Œè®©æœåŠ¡å™¨è¿”å›æµè§ˆå™¨æƒ³è¦çš„æ•°æ®\nâ€‹\thttp://xxxx.com/xxx/xxx?param1 = value \u0026\u0026 param2 = value2\nâ€‹\tAxios æŸ¥è¯¢å‚æ•°\naxios æä¾› params é€‰é¡¹ axios({ url:' http://hmajax.itheima.net' params: { pname:'æ²³åŒ—çœ' } }).then(result=\u003e{ // å¤„ç†åç»­code }) å¸¸ç”¨çš„è¯·æ±‚æ–¹æ³• å¯¹æœåŠ¡å™¨èµ„æºï¼Œæ‰§è¡Œçš„æ“ä½œ\nè¯·æ±‚æ–¹æ³• æ“ä½œ GET è·å–æ•°æ® POST æäº¤æ•°æ® PUT ä¿®æ”¹æ•°æ® (å…¨éƒ¨) DELETE åˆ é™¤æ•°æ® PATCH ä¿®æ”¹æ•°æ® (éƒ¨åˆ†) axios è¯·æ±‚é…ç½®\nurlï¼šè¯·æ±‚URLç½‘å€\nmethodï¼šè¯·æ±‚æ–¹æ³•ï¼ŒGETå¯ä»¥çœç•¥ï¼ˆä¸åŒºåˆ†å¤§å°å†™ï¼‰\ndataï¼šæäº¤çš„æ•°æ®\nheader: è¯·æ±‚å¤´æ•°æ®ï¼Œé€šå¸¸ç”¨äºä¼ é€’tokenï¼Œå¯ä»¥åœ¨axiosä¸­çš„è¯·æ±‚æ‹¦æˆªå™¨ä¸­è®¾ç½®å…¬å…±çš„ headers é€‰é¡¹\naxios({ url : 'ç›®æ ‡èµ„æºåœ°å€', method : 'è¯·æ±‚æ–¹æ³•', data :{ params ï¼švalue } }).then((result)=\u003e{ }) axios({ url:'', headers: { Authorization: `Bearer ${token}` // Beareræ˜¯æˆæƒç±»å‹ } }) axios è¯·æ±‚æ‹¦æˆªå™¨ï¼šæœ¬è´¨æ˜¯é…ç½®å‡½æ•°ï¼Œåœ¨å‘èµ·è¯·æ±‚ä¹‹å‰è§¦å‘ï¼Œå¯¹è¯·æ±‚å‚æ•°è¿›è¡Œé¢å¤–é…ç½®ã€‚ä¸€èˆ¬æ”¾åœ¨åŸºåœ°å€.baseURLçš„.jså†… axios.interceptor.request.use(function (config) { const token = location.getItem('token') token \u0026\u0026 config.headers.Authorization = `Bearer ${token}` // åœ¨å‘é€è¯·æ±‚ä¹‹å‰åšäº›ä»€ä¹ˆ return config }, function (error) { // å¯¹è¯·æ±‚é”™è¯¯åšäº›ä»€ä¹ˆ return Promise.reject(error) }) Axios å“åº”æ‹¦æˆªå™¨\nå“åº”(response)å›åˆ° then/catchä¹‹å‰ï¼Œè§¦å‘çš„æ‹¦æˆªå‡½æ•°ï¼Œå¯¹å“åº”ç»“æœç»Ÿä¸€å¤„ç†ï¼Œä¾‹å¦‚èº«ä»½éªŒè¯å¤±è´¥ï¼Œç»Ÿä¸€åˆ¤æ–­å¹¶ä½œå¤„ç†ï¼›å¦‚æœæˆåŠŸè®¾ç½®è¿”å›æ•°æ®å¯¹è±¡é‡Œçš„æŸä¸ªå±æ€§ï¼Œåœ¨å…¶ä»–æ“ä½œä¸­æ›´åŠ ç®€æ´ã€‚ä¸€èˆ¬æ”¾åœ¨åŸºåœ°å€.baseURLçš„.jså†…\n// æ·»åŠ å“åº”æ‹¦æˆªå™¨ axios.interceptors.response.use(function (response) { // 2xx èŒƒå›´å†…çš„çŠ¶æ€ç éƒ½ä¼šè§¦å‘è¯¥å‡½æ•° // å¯¹å“åº”æ•°æ® è¿”å›å¯¹è±¡ä¸­çš„ dataå±æ€§ const result = response.data // ä¸ç”¨å†™ response.data.dataè¿™ä¹ˆç¹ç return result; }, function (error) { if (error?.response?.status === 401) { // è¿™æ˜¯ä¸€ä¸ªæ¡ä»¶è¯­å¥ï¼Œé¦–å…ˆæ£€æŸ¥ error å¯¹è±¡æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœå­˜åœ¨åˆ™ç»§ç»­æ£€æŸ¥å…¶ response å±æ€§æ˜¯å¦å­˜åœ¨ï¼Œ // æœ€åå†æ£€æŸ¥ response å¯¹è±¡ä¸­çš„ status å±æ€§æ˜¯å¦ç­‰äº 401ã€‚è¿™é‡Œä½¿ç”¨äº†å¯é€‰é“¾æ“ä½œç¬¦ ?. // ä»¥é¿å…å½“æŸäº›å±æ€§ä¸º null æˆ– undefined æ—¶å¼•å‘é”™è¯¯ã€‚ alert('ç™»å½•çŠ¶æ€è¿‡æœŸï¼Œè¯·é‡æ–°ç™»å½•') localStorage.clear() location.href = 'login/index.html' } return Promise.reject(error); }); æ€»ç»“ï¼š\nè¯·æ±‚æ–¹æ³•è¡¨æ˜å¯¹æœåŠ¡å™¨èµ„æºçš„æ“ä½œï¼ŒPOST æäº¤æ•°æ® GETæŸ¥è¯¢æ•°æ®\naxios æ ¸å¿ƒé…ç½®\nurl ï¼šè¯·æ±‚URLç½‘å€\nmethod : è¯·æ±‚æ–¹æ³•ï¼Œ getå¯ä»¥çœç•¥\nparams ï¼š æŸ¥è¯¢å‚æ•°\ndata ï¼š æäº¤æ•°æ®, è¯·æ±‚ä½“\naxios æ˜¯ä¸€ä¸ªè°ƒç”¨å‡½æ•°ï¼Œå¯¹è¯·æ±‚å‚æ•°è¿›è¡Œè®¾ç½®\nåœ¨å…¬å…±é…ç½®å’Œè®¾ç½®æ˜¯ï¼Œç»Ÿä¸€è®¾ç½®åœ¨è¯·æ±‚æ‹¦æˆªå™¨ä¸­\nåœ¨ axiosçš„ä½¿ç”¨ä¸­ï¼Œå‘ç°dataåé¢æ—¶å¯¹è±¡çš„æ ¼å¼ï¼Œä¼šè‡ªåŠ¨è½¬æ¢æˆjsonæ ¼å¼\næµè§ˆå™¨å‘é€è‡³æœåŠ¡å™¨ å«åš è¯·æ±‚ä½“ï¼Œ åœ¨network -\u003e playloadä¸­å¯ä»¥æŸ¥çœ‹\næœåŠ¡å™¨è¿”å›ç»™æµè§ˆå™¨ å«åš å“åº”ä½“ï¼Œ åœ¨ network -\u003e å“åº”ä¸­å¯ä»¥æŸ¥çœ‹\n3. axiosé”™è¯¯å¤„ç† Axios ä¼šåœ¨æ§åˆ¶å°è¿”å›é”™è¯¯ä¿¡æ¯ï¼Œ ä¸ºäº†å¢åŠ ç”¨æˆ·ä½“éªŒï¼Œå¼€å‘äººå‘˜å¯ä»¥è®²é”™è¯¯ä¿¡æ¯ä»¥æ¢çŸ¿çš„å½¢å¼å±•ç°ç»™ç”¨æˆ·\nè¯­æ³•ï¼š åœ¨ then æ–¹æ³•çš„åé¢ï¼Œé€šè¿‡ç‚¹è¯­æ³•è°ƒç”¨ catch æ–¹æ³•ï¼Œä¼ å…¥å›è°ƒå‡½æ•°å¹¶å®šä¹‰å½¢å‚\naxios({ // è¯·æ±‚é€‰é¡¹ }).then(result=\u003e{ }).catch(error=\u003e{ }) axios({ url: 'http://hmajax.itheima.net/api/register', method: 'post', data: { 'username': 'itheima789', 'password': '123456' } }).then(result =\u003e { console.log(result) }).catch(error =\u003e { console.log(error) console.log(error.response.data.message) // é”™è¯¯ä¿¡æ¯å­˜æ”¾çš„ä½ç½® alertï¼ˆerror.response.data.messageï¼‰ }) 4. HTTPåè®® - è¯·æ±‚æŠ¥æ–‡ HTTP åè®®ï¼š è§„å®šäº†æµè§ˆå™¨å‘é€æœåŠ¡å™¨è¿”å›å†…å®¹çš„æ ¼å¼ è¯·æ±‚æŠ¥æ–‡ï¼šæµè§ˆå™¨æŒ‰ç…§HTTP åè®®è¦æ±‚çš„æ ¼å¼ï¼Œå‘é€ç»™æœåŠ¡å™¨çš„å†…å®¹ã€‚æ‰€ä»¥è¯·æ±‚æŠ¥æ–‡å°±æ˜¯éµå®ˆæ ¼å¼çš„å†…å®¹é›†åˆ è¯·æ±‚æŠ¥æ–‡çš„ç»„æˆéƒ¨åˆ† è¯·æ±‚è¡Œï¼š è¯·æ±‚æ–¹æ³•ï¼Œ URLï¼Œ åè®®\nè¯·æ±‚å¤´ï¼š ä»¥é”®å€¼å¯¹çš„æ ¼å¼æºå¸¦çš„é™„åŠ ä¿¡æ¯ Content-Type: application/json\nç©ºè¡Œï¼š åˆ†éš”è¯·æ±‚å¤´ï¼Œç©ºè¡Œä¹‹åæ˜¯å‘é€ç»™æœåŠ¡å™¨çš„èµ„æº\nè¯·æ±‚ä½“ï¼š æµè§ˆå™¨å‘é€çš„èµ„æº\n5. HTTPåè®® - å“åº”æŠ¥æ–‡ HTTP åè®®ï¼š è§„å®šäº†æµè§ˆå™¨å‘é€åŠæœåŠ¡å™¨è¿”å›å†…å®¹çš„æ ¼å¼ å“åº”æŠ¥æ–‡ï¼š æœåŠ¡å™¨æŒ‰ç…§HTTPåè®®è¦æ±‚çš„æ ¼å¼ï¼Œè¿”å›ç»™æµè§ˆå™¨çš„å†…å®¹ å“åº”æŠ¥æ–‡çš„ç»„æˆéƒ¨åˆ†\nå“åº”è¡Œï¼ˆçŠ¶æ€è¡Œï¼‰ï¼šåè®®ã€HTTPå“åº”çŠ¶æ€ç ã€çŠ¶æ€ä¿¡æ¯\nçŠ¶æ€ç  è¯´æ˜ 1xx ä¿¡æ¯ 2xx æˆåŠŸ 3xx é‡å®šå‘æ¶ˆæ¯ 4xx å®¢æˆ·ç«¯é”™è¯¯ 5xx æœåŠ¡ç«¯é”™è¯¯ å“åº”å¤´ï¼šä»¥é”®å€¼å¯¹çš„æ ¼å¼æºå¸¦çš„é™„åŠ ä¿¡æ¯ Content-Type:Application/JSON\nç©ºè¡Œï¼š åˆ†éš”å“åº”å¤´ï¼Œç©ºè¡Œä¹‹åçš„æ˜¯æœåŠ¡å™¨è¿”å›çš„èµ„æº\nå“åº”ä½“ï¼šè¿”å›çš„èµ„æº\n6. æ¥å£æ–‡æ¡£ æè¿°æ¥å£çš„æ–‡ç« \næ¥å£æ˜¯ä»€ä¹ˆï¼Ÿ\nä½¿ç”¨AJAXå’ŒæœåŠ¡å™¨é€šè®¯æ—¶ï¼Œä½¿ç”¨çš„URL, è¯·æ±‚æ–¹æ³•ï¼Œä»¥åŠå‚æ•°\n7. form-serialize æ’ä»¶ å¿«é€Ÿæ”¶é›†è¡¨å•å…ƒç´ çš„å€¼\nconst form = document.querySelector('.example-form') const data = serialize(form, {hash: true, empty:true}) ä½¿ç”¨è§£è¯»ï¼š\nå‚æ•°1ï¼šè¦è·å–å“ªä¸ªè¡¨å•çš„æ•°æ®\nè¡¨å•å…ƒç´ è®¾ç½®nameå±æ€§ï¼Œå€¼ä¼šä½œä¸ºå¯¹è±¡çš„å±æ€§åã€‚å»ºè®®nameå±æ€§çš„å€¼ï¼Œæœ€å¥½ä¸æ¥å£æ–‡æ¡£å‚æ•°åä¸€è‡´\nå‚æ•°2: é…ç½®å¯¹è±¡\nhash è®¾ç½®è·å–æ•°æ®ç»“æ„\ntrueï¼š JS å¯¹è±¡ï¼ˆæ¨èï¼‰ä¸€èˆ¬è¯·æ±‚ä½“æäº¤è‡³æœåŠ¡å™¨çš„æ ¼å¼ã€‚ falseï¼šæŸ¥è¯¢å­—ç¬¦ä¸² empty è®¾ç½®æ˜¯å¦è·å–ç©ºå€¼\ntrueï¼šè·å–ç©ºå€¼ï¼ˆæ¨èï¼‰æ•°æ®ç»“æ„å’Œæ ‡ç­¾ç»“æ„ä¸€è‡´ falseï¼šä¸è·å–ç©ºå€¼ 8. APIè¦æ±‚è¯·æ±‚ä½“FormData() æ–‡ä»¶é€‰æ‹©å…ƒç´  -\u003e ä½¿ç”¨changeæ”¹å˜äº‹ä»¶ï¼Œä½¿ç”¨filesè·å–ç›‘å¬äº‹ä»¶çš„æ–‡ä»¶åˆ—è¡¨ ä½¿ç”¨FormData()ä¼ è¾“æ–‡ä»¶ document.querySelector('.upload').addEventListener('change',e=\u003e{ //1. è·å–å›¾ç‰‡æ–‡ä»¶,ä½¿ç”¨filesè·å–ç›‘å¬äº‹ä»¶çš„æ–‡ä»¶åˆ—è¡¨ console.log(e.target.files[0]) const fd = new FormData() fd.append('img',e.target.files[0]) axios({ // api url:'', method:'post', data:fd }).then(result=\u003e{ console.log(result) const imgUrl = result.data.data.url document.querySelector('.img').src = imgUrl }) } Day3 1. AJAX åŸç† - XMLHttpRequest XMLHttpRequest ï¼ˆXHRï¼‰å¯¹è±¡ç”¨äºä¸æœåŠ¡å™¨äº¤äº’ã€‚é€šè¿‡XMLHttpRequest å¯ä»¥åœ¨ä¸åˆ·æ–°é¡µé¢çš„æƒ…å†µä¸‹è¯·æ±‚ç‰¹å®šçš„URLï¼Œè·å–æ•°æ®ã€‚\nè¿™å…è®¸ç½‘é¡µåœ¨ä¸å½±å“ç”¨æˆ·æ“ä½œçš„æƒ…å†µä¸‹ï¼Œæ›´æ–°é¡µé¢çš„å±€éƒ¨å†…å®¹ã€‚\nXMLHttpRequest åœ¨AJAXç¼–ç¨‹ä¸­è¢«å¤§é‡ä½¿ç”¨\nå…³ç³»ï¼šaxios å†…éƒ¨é‡‡ç”¨ XMLHttpRequestä¸æœåŠ¡å™¨äº¤äº’\n1. ä½¿ç”¨ XMLHttpRequest æ­¥éª¤\u0026è¯­æ³•\nconst xhr = new XMLHttpRequest() xhr.open('è¯·æ±‚æ–¹æ³•','è¯·æ±‚urlç½‘å€') xhr.addEventListener('loadend',()=\u003e{ // å“åº”ç»“æœ console.log(xhr.response) // æ¥å—æœåŠ¡ç«¯çš„å“åº” }) xhr.send() // ç»™æœåŠ¡ç«¯å‘é€è¯·æ±‚ // å†æ¥ä¸€ä¸ªæ¡ˆä¾‹ const xhr = new XMLHttpRequest() xhr.open('get', 'http://hmajax.itheima.net/api/province') xhr.addEventListener('loadend', () =\u003e { // æ— è®ºæˆåŠŸæˆ–å¤±è´¥ï¼Œéƒ½ä¼šè¿”å›æ•°æ® // è¿”å›jsonå­—ç¬¦ä¸²ï¼Œ axioså¸®å¿™è½¬æˆäº†jså¯¹è±¡ console.log(xhr.response) // è½¬æ¢æˆjså¯¹è±¡ const data = JSON.parse(xhr.response) // è½¬æ¢æˆå­—ç¬¦ä¸² console.log(data.list.join('\n')) }) // å‘èµ·è¯·æ±‚ xhr.send() æ€»ç»“ï¼š\nAJAXåŸç†\nXMLHttpRequest å¯¹è±¡\nä¸ºä»€ä¹ˆå­¦ä¹  XHRï¼Ÿ\näº†è§£axioså†…éƒ¨åŸç†\näº†è§£æœåŠ¡å™¨æ•°æ®é€šä¿¡çš„æ–¹å¼\nXHRä½¿ç”¨æ­¥éª¤ï¼Ÿ\nåˆ›å»ºXHRå¯¹è±¡\nè°ƒç”¨openæ–¹æ³•ï¼Œè®¾ç½®urlå’Œè¯·æ±‚æ–¹æ³•\nç›‘å¬loadendäº‹ä»¶ï¼Œæ¥æ”¶ç»“æœ\nè°ƒç”¨sendæ–¹æ³•ï¼Œå‘èµ·è¯·æ±‚\n2. XMLHttpRequest -æŸ¥è¯¢å‚æ•° å®šä¹‰ï¼š æµè§ˆå™¨æä¾›ç»™æœåŠ¡å™¨çš„é¢å¤–ä¿¡æ¯ï¼Œè®©æœåŠ¡å™¨è¿”å›æµè§ˆå™¨æƒ³è¦çš„æ•°æ®\nè¯­æ³•ï¼šhttp://xxxx.com/xxx/xxx?å‚æ•°å1=å€¼1 \u0026 å‚æ•°å2=å€¼2\n3. URLSearchParams() ç”¨æ¥ç”ŸæˆæŸ¥è¯¢å‚æ•°\nconst paramsObj = new URLSearchParams({ å‚æ•°å1:å€¼1, å‚æ•°å2:å€¼2 }) const queryString = paramsObj.toString() 4. XMLHttpRequest() æ•°æ®æäº¤ è¯·æ±‚å¤´è®¾ç½® Content-Typeï¼šapplication/json\nè¯·æ±‚ä½“æºå¸¦JSON å­—ç¬¦ä¸²\nåœ¨å¼€å‘è€…æ§åˆ¶å°çš„ ç½‘ç»œ-\u003e Fetch/XHR-\u003eé€‰æ‹©è°ƒç”¨çš„æ¥å£\nconst xhr = new XML HttpRequest() xhr.open('è¯·æ±‚æ–¹æ³•'ï¼Œ'è¯·æ±‚urlç½‘å€') xhr.addEventListener('loadend',()=\u003e( console.log(xhr.response) )) // æäº¤æ—¶ï¼Œè®¾ç½®è¯·æ±‚å¤´ xhr.setRequestHeader('content-type','application/json') const user = {username:'itheima007',password:'7654321'} // è½¬æ¢æˆjson const userJson = JSON.stringify(user) xhr.send(userJson) 2. Promiseå¯¹è±¡ å®šä¹‰ï¼š Promise å¯¹è±¡ç”¨äºè¡¨ç¤ºä¸€ä¸ªå¼‚æ­¥æ“ä½œçš„æœ€ç»ˆå®Œæˆï¼ˆæˆ–å¤±è´¥ï¼‰åŠå…¶ç»“æœå€¼\nç›®å‰å­¦è¿‡çš„å¼‚æ­¥ï¼šAJAX, setTimeout(), setTimeInterval()\n1. äº†è§£ ä¼˜åŠ¿ï¼š\né€»è¾‘æ›´æ¸…æ™° äº†è§£axios å‡½æ•°å†…éƒ¨è¿ä½œæœºåˆ¶ èƒ½è§£å†³å›è°ƒå‡½æ•°åœ°ç‹±é—®é¢˜ // åˆ›å»ºPromiseå¯¹è±¡ const p = new Promise((resolve, reject)=\u003e{ // æ‰§è¡Œä¸€æ­¥ä»»åŠ¡å¹¶ä¼ é€’ç»“æœ // æˆåŠŸè°ƒç”¨ï¼š resolve(å€¼)è§¦å‘ then()æ‰§è¡Œ // å¤±è´¥è°ƒç”¨ï¼š reject(å€¼)è§¦å‘ catch()æ‰§è¡Œ }) p.then(result=\u003e{ // æˆåŠŸ }).catch(error=\u003e{ // å¤±è´¥ }) æ€»ç»“ï¼š\nä»€ä¹ˆæ˜¯Promise? ç®¡ç†ä¸€ä¸ªå¼‚æ­¥æ“ä½œæœ€ç»ˆçŠ¶æ€å’Œç»“æœçš„å€¼çš„å¯¹è±¡\nä¸ºä»€ä¹ˆå­¦ä¹ Promiseï¼Ÿ\næˆåŠŸå’Œå¤±è´¥çŠ¶æ€ï¼Œå¯ä»¥å…³è”å¯¹åº”å¤„ç†ç¨‹åº\näº†è§£axioså†…éƒ¨åŸç†\nPromiseä½¿ç”¨æ­¥éª¤\nåˆ›å»ºå¯¹è±¡ å®šä¹‰ä¸¤ä¸ªå½¢å‚å¹¶æ‰§è¡Œå›è°ƒå‡½æ•°ï¼Œæ‰§è¡Œå¼‚æ­¥ä»£ç  æˆåŠŸå’Œå¤±è´¥æ‰§è¡Œä¸åŒçš„å‡½æ•° åœ¨.then() .catch()æ–¹æ³•ä¸­æ•æ‰æˆåŠŸæˆ–å¤±è´¥çš„ç»“æœ 2. Promise ä¸‰ç§çŠ¶æ€ ä½œç”¨ï¼š äº†è§£Promiseå¯¹è±¡å¦‚ä½•å…³è”å’Œå¤„ç†å‡½æ•°ï¼Œä»¥åŠä»£ç æ‰§è¡Œé¡ºåº\næ¦‚å¿µï¼š ä¸€ä¸ªPromiseå¯¹è±¡ï¼Œå¿…ç„¶å¤„äºä»¥ä¸‹å‡ ç§çŠ¶æ€ä¹‹ä¸€\nå¾…å®š (pending)ï¼š åˆå§‹çŠ¶æ€ï¼Œå³æ²¡æœ‰è¢«å…‘ç°ï¼Œä¹Ÿæ²¡æœ‰è¢«æ‹’ç» å·²å…‘ç° (fulfilled)ï¼š æ“ä½œæˆåŠŸå®Œæˆ å·²æ‹’ç» (rejected)ï¼šæ“ä½œå¤±è´¥ æ³¨æ„ï¼š Promise å¯¹è±¡ä¸€æ—¦è¢«å…‘ç°/æ‹’ç»ï¼Œæ­¤çŠ¶æ€æ— æ³•è¢«æ”¹å˜\n// 1. åˆ›å»ºPromiseå¯¹è±¡ ï¼ˆpending - å¾…å®šçŠ¶æ€ï¼‰ const p = new Promise((resolve, reject) =\u003e { console.log('Promiseå¯¹è±¡å†…å¼€å§‹æ‰§è¡Œ') // Promiseå¯¹è±¡è¢«åˆ›å»ºæ—¶ï¼Œä»£ç ç«‹åˆ»æ‰§è¡Œ // 2. æ‰§è¡Œå¼‚æ­¥ä»£ç  setTimeout(() =\u003e { // å½“resolve()=\u003eè¢«è°ƒç”¨æ—¶ï¼ŒPromiseçš„çŠ¶æ€ä¼šæ›´æ”¹ä¸ºâ€˜fulfilled å·²å…‘ç°â€™ // å¯¼è‡´then()ä¸­çš„å›è°ƒå‡½æ•°æ‰§è¡Œ resolve('æ¨¡æ‹Ÿajaxè¯·æ±‚æˆåŠŸ') // å½“reject()=\u003eè¢«è°ƒç”¨æ—¶ï¼ŒPromiseçš„çŠ¶æ€ä¼šæ›´æ”¹ä¸ºâ€˜rejected å·²æ‹’ç»â€™ // å¯¼è‡´catch()ä¸­çš„å›è°ƒå‡½æ•°æ‰§è¡Œ // reject(new Error('å¤±è´¥ï¼')) }, 2000) }) p.then(result =\u003e { console.log(result); }).catch(error =\u003e { console.log(error) }) æ€»ç»“ï¼š\nPromise å¯¹è±¡æœ‰å“ªä¸‰ç§çŠ¶æ€ï¼Ÿ\nå¾…å®š pending\nå·²å…‘ç° fulfilled\nå·²æ‹’ç» rejected\nPromise çŠ¶æ€æœ‰ä»€ä¹ˆç”¨ï¼Ÿ\nçŠ¶æ€æ”¹å˜åï¼Œè°ƒç”¨å…³è”çš„å¤„ç†å‡½æ•°\næ¡ˆä¾‹ï¼š Promise å’Œ XMLHttpRequest çš„ç»“åˆ\nconst p = new Promise((resolve, reject) =\u003e { const xhr = new XMLHttpRequest() xhr.open('GET', 'http://hmajax.itheima.net/api/provincedhdhdh') xhr.addEventListener('loadend', () =\u003e { // xhrä½¿ç”¨å“åº”ç åˆ¤æ–­ å“åº”æˆåŠŸè¿˜æ˜¯å¤±è´¥ 2xxå¼€å¤´éƒ½æ˜¯æˆåŠŸ 4xxéƒ½æ˜¯é”™ // å“åº”ç  console.log(xhr.status) console.log(xhr.response) if (xhr.status \u003e= 200 \u0026\u0026 xhr.status \u003c 300) { resolve(JSON.parse(xhr.response)) } else { reject(new Error(xhr.response)) } }) xhr.send() }) p.then(result =\u003e { document.querySelector('.my-p').innerHTML = result.list.join('\n') }).catch(error =\u003e { // é”™è¯¯å¯¹è±¡è¦ç”¨console.dirè¯¦ç»†æ‰“å° console.dir(error) console.log(error) document.querySelector('.my-p').innerHTML = error.message }) Day4 1. åŒæ­¥ä»£ç \u0026å¼‚æ­¥ä»£ç  åŒæ­¥ä»£ç \nå®é™…ä¸Šæµè§ˆå™¨æŒ‰ç…§æˆ‘ä»¬ä¹¦å†™ä»£ç çš„é¡ºåºä¸€è¡Œä¸€è¡Œåœ°æ‰§è¡Œç¨‹åºã€‚æµè§ˆå™¨ä¼šç­‰å¾…ä»£ç çš„è§£æå’Œå·¥ä½œï¼Œåœ¨ä¸Šä¸€è¡Œå®Œæˆåæ‰ä¼šæ‰§è¡Œä¸‹ä¸€è¡Œã€‚è¿™æ ·å°±å¾ˆæœ‰å¿…è¦ï¼Œå› ä¸ºæ¯ä¸€è¡Œæ–°çš„ä»£ç éƒ½æ˜¯å»ºç«‹åœ¨å‰é¢çš„ä»£ç çš„åŸºç¡€ä¹‹ä¸Šçš„ã€‚\nè¿™ä¹Ÿä½¿å¾—å®ƒæˆä¸ºä¸€ä¸ªåŒæ­¥ç¨‹åº\nå¼‚æ­¥ä»£ç \nå¼‚æ­¥ç¼–ç¨‹æŠ€æœ¯ä½¿ä½ çš„ç¨‹åºå¯ä»¥æ‰§è¡Œä¸€ä¸ªå¯èƒ½é•¿æœŸè¿è¡Œçš„ä»»åŠ¡åŒæ—¶ç»§ç»­å¯¹å…¶ä»–äº‹ä»¶åšå‡ºååº”è€Œä¸å¿…ç­‰å¾…ä»»åŠ¡å®Œæˆã€‚ä¸æ­¤åŒæ—¶ï¼Œä½ çš„ç¨‹åºä¹Ÿå°†åœ¨ä»»åŠ¡å®Œæˆåæ˜¾ç¤ºç»“æœ\næ€»ç»“ï¼š\nåŒæ­¥ä»£ç ï¼šé€è¡Œæ‰§è¡Œï¼Œéœ€è¦åœ¨åŸåœ°ç­‰å¾…ç»“æœï¼Œæ‰èƒ½ç»§ç»­å‘ä¸‹æ‰§è¡Œ å¼‚æ­¥ä»£ç ï¼šè°ƒç”¨åè€—æ—¶ï¼Œä¸é˜»å¡ä»£ç ç»§ç»­æ‰§è¡Œï¼ˆä¸å¿…åŸåœ°ç­‰å¾…ï¼‰ï¼Œåœ¨å°†æ¥å®Œæˆåè§¦å‘ä¸€ä¸ªå›è°ƒå‡½æ•°ã€‚å¼‚æ­¥ä»£ç æ¥æ”¶ç»“æœï¼Œä½¿ç”¨å›è°ƒå‡½æ•° // æ•°å­—æ‰“å°é¡ºåº const result = 0+1 console.log(result) //1 setTimeout(()=\u003e{ console.log(2) },2000) //2 // äº‹ä»¶ç›¸å…³çš„ä»£ç éƒ½æ˜¯å¼‚æ­¥ï¼Œå› ä¸ºä¸ä¼šé˜»å¡ä»£ç æ‰§è¡Œ document.querySelector('.btn').addEventListener('click',()=\u003e{ console.log(3) }) document.body.style.backgroundColor = 'pink' console.log(4) // æ‰“å°é¡ºåºåº”è¯¥æ˜¯ 1 4 2 æ€»ç»“ï¼š\nä»€ä¹ˆæ˜¯åŒæ­¥ä»£ç ï¼Ÿ é€è¡Œæ‰§è¡Œï¼ŒåŸåœ°ç­‰å¾…ç»“æœï¼Œæ‰ç»§ç»­å‘ä¸‹æ‰§è¡Œå…¶ä»–çš„ä»£ç \nä»€ä¹ˆæ˜¯å¼‚æ­¥ä»£ç ï¼Ÿè°ƒç”¨åè€—æ—¶ï¼Œä¸é˜»å¡ä»£ç æ‰§è¡Œï¼Œå°†æ¥å®Œæˆåè§¦å‘å›è°ƒå‡½æ•°\nJS ä¸­æœ‰å“ªäº›å¼‚æ­¥ä»£ç  ?\nsetTimeout/setInterval\näº‹ä»¶\nAJAX\nå¼‚æ­¥ä»£ç å¦‚ä½•æ¥æ”¶ç»“æœï¼Ÿä¾é å›è°ƒå‡½æ•°æ¥æ¥æ”¶\n2. å›è°ƒå‡½æ•°åœ°ç‹± åœ¨å›è°ƒå‡½æ•°ä¸­ åµŒå¥—å›è°ƒå‡½æ•°ï¼Œä¸€ç›´åµŒå¥—ä¸‹å»å°±å½¢æˆäº†å›è°ƒå‡½æ•°åœ°ç‹±\nç¼ºç‚¹ï¼š å¯è¯»æ€§å·®ï¼Œå¼‚å¸¸æ— æ³•æ•è·ï¼Œè€¦åˆæ€§ä¸¥é‡ï¼Œç‰µä¸€å‘åŠ¨å…¨èº«\n3. Promise - é“¾å¼è°ƒç”¨ æ¦‚å¿µï¼š ä¾é  then()æ–¹æ³•ä¼šè¿”å›ä¸€ä¸ªæ–°ç”Ÿæˆçš„ Promiseå¯¹è±¡ç‰¹æ€§ï¼Œç»§ç»­ä¸²è”ä¸‹ä¸€ç¯ä»»åŠ¡ï¼Œç›´åˆ°ç»“æŸ\nç»†èŠ‚ï¼šthen()å›è°ƒå‡½æ•°ä¸­çš„è¿”å›å€¼ï¼Œä¼šå½±å“æ–°ç”ŸæˆPromiseå¯¹è±¡æœ€ç»ˆçŠ¶æ€å’Œç»“æœ\nå¥½å¤„ï¼š é€šè¿‡é“¾å¼è°ƒç”¨ï¼Œè§£å†³å›è°ƒå‡½æ•°åµŒå¥—é—®é¢˜\nsetTimeout è¢«ç”¨æ¥æ¨¡æ‹Ÿä¸€ä¸ªè€—æ—¶ 2 ç§’çš„å¼‚æ­¥æ“ä½œã€‚å½“è¿™ä¸ªå¼‚æ­¥æ“ä½œå®Œæˆåï¼ˆå³ 2 ç§’åï¼‰ï¼Œresolve è¢«è°ƒç”¨ï¼Œå¹¶ä¼ é€’äº†å­—ç¬¦ä¸² 'ä¸Šæµ·å¸‚' ä½œä¸ºå‚æ•°ã€‚è¿™ä¼šå¯¼è‡´ Promise å¯¹è±¡ p çš„çŠ¶æ€å˜ä¸º fulfilledï¼Œå¹¶ä¸” 'ä¸Šæµ·å¸‚' è¿™ä¸ªå€¼ä¼šè¢«ä¼ é€’ç»™ p.then ä¸­æ³¨å†Œçš„å›è°ƒå‡½æ•°ï¼Œå¹¶è¢«æ‰“å°å‡ºæ¥ã€‚\n/** * ç›®æ ‡ï¼šæŒæ¡Promiseçš„é“¾å¼è°ƒç”¨ * éœ€æ±‚ï¼šæŠŠçœå¸‚çš„åµŒå¥—ç»“æ„ï¼Œæ”¹æˆé“¾å¼è°ƒç”¨çš„çº¿æ€§ç»“æ„ */ // 1. åˆ›å»ºPromiseå¯¹è±¡ const p = new Promise((resolve, reject) =\u003e { setTimeout(() =\u003e { resolve('ä¸Šæµ·å¸‚') }, 2000) }) // è·å–çœä»½åç§° const p2 = p.then(result =\u003e { console.log(result) // ä¸Šæµ·å¸‚ // 3ï¼Œ åˆ›å»ºPromiseå¯¹è±¡ æ¨¡æ‹Ÿè¯·æ±‚åŸå¸‚åå­— return new Promise((resolve, reject) =\u003e { setTimeout(() =\u003e { resolve(result + 'ä¸Šæµ·å¸‚' + 'åŸå¸‚') }, 2000) }) }) // è·å–åŸå¸‚åå­— p2.then(result =\u003e { // è¿™ä¸ªresulté‡Œé¢æ˜¯ ä¸Šä¸€ä¸ªresolveä¸­ä¼ é€’è¿›æ¥çš„å‚æ•° console.log(result) }) // ä¼šå‘ç° p å’Œ p2 å¹¶ä¸å…¨ç­‰,å°±æ„å‘³ç€then()è¿”å›ä¸€ä¸ªæ–°çš„å¯¹è±¡ console.log(p2 === p) æ€»ç»“ï¼š\nä»€ä¹ˆæ˜¯ Promise çš„é“¾å¼è°ƒç”¨ï¼Ÿ\nä½¿ç”¨ then()è¿”å›æ–°çš„Promiseå¯¹è±¡ï¼Œä¸€ç›´ä¸²è”ä¸‹å»\nthen å›è°ƒå‡½æ•°ä¸­ï¼Œ return çš„å€¼ä¼šä¼ ç»™å“ªé‡Œï¼Ÿ\nä¼ ç»™thenå‡½æ•°ç”Ÿæˆçš„æ–° Promiseå¯¹è±¡\nPromise é“¾å¼è°ƒç”¨ è§£å†³äº† å›è°ƒå‡½æ•°åµŒå¥—é—®é¢˜\n4. asyncå‡½æ•°å’Œawait 1. å®šä¹‰ async() ä½¿ç”¨asyncå…³é”®å­—å£°æ˜çš„å‡½æ•°ã€‚asyncå‡½æ•°æ˜¯AsyncFunctionæ„é€ å‡½æ•°çš„å®ä¾‹ï¼Œå¹¶ä¸”å…¶ä¸­å…è®¸ä½¿ç”¨awaitå…³é”®å­—ã€‚asyncå’Œawaitå…³é”®å­—è®©æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸€ç§æ›´ç®€æ´çš„æ–¹å¼å†™å‡ºåŸºäºPromiseçš„å¼‚æ­¥è¡Œä¸ºï¼Œè€Œæ— éœ€åˆ»æ„åœ°é“¾å¼è°ƒç”¨promise\n2. æ¡ˆä¾‹ async function getDefaultArea(){ const pObj = await axios({url:'http://hmajax.itheima.net/api/province'}) const pname = pObj.data.list[0] const cObj = await axios({url:'http://hmajax.itheima.net/api/city',params:{pname}}) const cname = cObj.data.list[0] const aObj = await axios({url:'http://hmajax.itheima.net/api/city',params:{pname,cname}}) const aname = aObj.data.list[0] document.querySelector('.province').innerHTML = pname document.querySelector('.city').innerHTML = cname document.querySelector('.area').innerHTML = aname } getDefaultArea() 3. æ­¥éª¤ æ¦‚å¿µï¼š åœ¨ async å‡½æ•°å†…ï¼Œä½¿ç”¨awaitå…³é”®å­—å–ä»£thenå‡½æ•°ï¼Œç­‰å¾…è·å–promiseå¯¹è±¡æˆåŠŸçŠ¶æ€\nasync ä¿®é¥°å‡½æ•°ï¼Œä½¿æ™®é€šå‡½æ•°å˜ä¸ºå¼‚æ­¥å‡½æ•° await åé¢å¢åŠ å¼‚æ­¥ä»»åŠ¡ await åé¢æˆåŠŸçš„ç»“æœ èµ‹ç»™ å·¦è¾¹çš„å˜é‡ 5. asyncå‡½æ•°å’Œawait æ•è·é”™è¯¯ 1. tryâ€¦catch â€‹ ä¸€æ—¦åœ¨tryè¿™ä¸ªä»£ç å—ä¸­å‡ºç°é”™è¯¯ï¼Œä¸‹é¢çš„å‡½æ•°éƒ½æ— æ³•æ‰§è¡Œ\nasync function getDefaultData() { try { // 1. try å¯èƒ½äº§ç”Ÿé”™è¯¯çš„ä»£ç  const pObj = await axios({ url: 'http://hmajax.itheima.net/api/province' }) const pname = pObj.data.list[0] const cObj = await axios({ url: 'http://hmajax.itheima.net/api/city', params: { pname } }) const cname = cObj.data.list[0] const aObj = await axios({ url: 'http://hmajax.itheima.net/api/area', params: { pname, cname } }) const aname = aObj.data.list[0] document.querySelector('.province').innerHTML = pname document.querySelector('.city').innerHTML = cname document.querySelector('.area').innerHTML = aname } catch (error) { // 2. æ¥ç€è°ƒç”¨catchå—ï¼Œæ¥æ”¶é”™è¯¯ä¿¡æ¯ // å¦‚æœtryæŸè¡Œä»£ç æŠ¥é”™åï¼Œtryä¸­å‰©ä½™çš„ä»£ç ä¸ä¼šæ‰§è¡Œ cosole.dir(error.response.data.message) } } 6. äº‹ä»¶å¾ªç¯ (EventLoop) 1. æ¦‚å¿µ JavaScript æœ‰ä¸€ä¸ª__åŸºäºäº‹ä»¶å¾ªç¯çš„å¹¶å‘æ¨¡å‹__ï¼Œäº‹ä»¶å¾ªç¯è´Ÿè´£æ‰§è¡Œä»£ç ã€æ”¶é›†å’Œå¤„ç†äº‹ä»¶ä»¥åŠæ‰§è¡Œé˜Ÿåˆ—ä¸­çš„å­ä»»åŠ¡ã€‚è¿™ä¸ªæ¨¡å‹ä¸å…¶ä»–è¯­è¨€ä¸­çš„æ¨¡å‹æˆªç„¶ä¸åŒï¼Œæ¯”å¦‚Cå’ŒJava\n2. åŸå›  JavaScriptå•çº¿ç¨‹ï¼ˆæŸä¸€åˆ»åªèƒ½æ‰§è¡Œä¸€è¡Œä»£ç ï¼‰ï¼Œä¸ºäº†è®©è€—æ—¶ä»£ç ä¸é˜»å¡å…¶ä»–ä»£ç è¿è¡Œï¼Œè®¾è®¡äº†äº‹ä»¶å¾ªç¯æ¨¡å‹\n3. æ‰§è¡Œè¿‡ç¨‹ console.log(1) // è°ƒç”¨æ ˆ setTimeout(()=\u003e{ console.log(2) },0) // å®¿ä¸»ç¯å¢ƒ console.log(3) setTimeout(()=\u003e{ console.log(4) },2000) console.log(5) // æ§åˆ¶å°è¾“å‡ºï¼š 1 3 5 2 4 è¿˜æ˜¯çœ‹ä¸€ä¸‹è€å¸ˆçš„è§†é¢‘è®²è§£ï¼Œæ¯”è¾ƒæ¸…æ™°ã€‚å¤§è‡´æ­¥éª¤æ˜¯ï¼šæ™®é€šçš„éå¼‚æ­¥å‡½æ•°ï¼ˆç«‹å³æ‰§è¡Œå‡½æ•°ï¼‰åœ¨è°ƒç”¨æ ˆå†…æ‰§è¡Œï¼›å¼‚æ­¥å‡½æ•°åœ¨å®¿ä¸»ç¯å¢ƒï¼ˆæµè§ˆå™¨ï¼‰ä¸­ç­‰å¾…æ‰§è¡Œå¹¶åŠ å…¥ä»»åŠ¡é˜Ÿåˆ—ï¼Œå¦‚æœè°ƒç”¨æ ˆå†…ä»»åŠ¡æ‰§è¡Œå®Œæ¯•ï¼Œ ä¼šå¾ªç¯åå¤çš„æŸ¥æ‰¾ä»»åŠ¡é˜Ÿåˆ—çš„å›è°ƒå‡½æ•°æ‰§è¡Œã€‚\n\u003c!DOCTYPE HTML\u003e 4. æ€»ç»“ ä»€ä¹ˆæ˜¯äº‹ä»¶å¾ªç¯ï¼Ÿ\næ‰§è¡Œä»£ç å’Œæ”¶é›†å¼‚æ­¥ä»»åŠ¡ï¼Œåœ¨è°ƒç”¨æ ˆç©ºé—²æ—¶ï¼Œåå¤è°ƒç”¨ä»»åŠ¡é˜Ÿåˆ—é‡Œå›è°ƒå‡½æ•°æ‰§è¡Œæœºåˆ¶\nä¸ºä»€ä¹ˆæœ‰äº‹ä»¶å¾ªç¯ï¼Ÿ\nJavaScript æ˜¯å•çº¿ç¨‹ï¼Œä¸ºäº†ä¸é˜»å¡JSå¼•æ“ï¼Œè®¾è®¡æ‰§è¡Œä»£ç çš„æ¨¡å‹\nJavaScript å†…ä»£ç å¦‚ä½•æ‰§è¡Œï¼Ÿ\næ‰§è¡ŒåŒæ­¥ä»£ç ï¼Œé‡åˆ°å¼‚æ­¥ä»£ç äº¤ç»™å®¿ä¸»æµè§ˆå™¨ç¯å¢ƒæ‰§è¡Œ\nå¼‚æ­¥æœ‰äº†ç»“æœåï¼ŒæŠŠå›è°ƒå‡½æ•°æ”¾å…¥ä»»åŠ¡é˜Ÿåˆ—æ’é˜Ÿ\nå½“è°ƒç”¨æ ˆç©ºé—²åï¼Œåå¤è°ƒç”¨ä»»åŠ¡é˜Ÿåˆ—é‡Œé¢çš„å›è°ƒå‡½æ•°\n7. å®ä»»åŠ¡ä¸å¾®ä»»åŠ¡ ES6 ä¹‹åå¼•å…¥Promiseå¯¹è±¡ï¼Œè®©JSå¼•æ“ä¹Ÿå¯ä»¥å‘èµ·å¼‚æ­¥ä»»åŠ¡\nå¼‚æ­¥ä»»åŠ¡åˆ†ä¸ºï¼š\nå®ä»»åŠ¡ï¼š ç”±æµè§ˆå™¨ç¯å¢ƒæ‰§è¡Œçš„å¼‚æ­¥ä»£ç  å¾®ä»»åŠ¡ï¼šç”± JS å¼•æ“ç¯å¢ƒæ‰§è¡Œçš„å¼‚æ­¥ä»£ç  ä»»åŠ¡ï¼ˆä»£ç ï¼‰ æ‰§è¡Œæ‰€åœ¨ç¯å¢ƒ JS è„šæœ¬æ‰§è¡Œäº‹ä»¶ (script) æµè§ˆå™¨ setTimeour/setInterval æµè§ˆå™¨ AJAX è¯·æ±‚å®Œæˆäº‹ä»¶ æµè§ˆå™¨ ç”¨æˆ·äº¤äº’äº‹ä»¶ç­‰ç­‰ æµè§ˆå™¨ Promiseå¯¹è±¡.then() JSå¼•æ“ Promise æœ¬èº«æ˜¯åŒæ­¥çš„ï¼Œè€Œthen å’Œ catch å›è°ƒå‡½æ•°æ˜¯å¼‚æ­¥çš„\nconsole.log(1) setTimeout(()=\u003e{ console.log(2) },0) const p 1. æ€»ç»“ ä»€ä¹ˆæ˜¯å®ä»»åŠ¡ï¼Ÿ\næµè§ˆå™¨æ‰§è¡Œçš„å¼‚æ­¥ä»£ç \nä¾‹å¦‚ï¼š JS æ‰§è¡Œè„šæœ¬äº‹ä»¶ setTimeout/setIntervaï¼ŒAJAXè¯·æ±‚å®Œæˆäº‹ä»¶ï¼Œç”¨æˆ·äº¤äº’äº‹ä»¶ç­‰ç­‰\nä»€ä¹ˆæ˜¯å¾®ä»»åŠ¡ï¼Ÿ\nJS å¼•æ“æ‰§è¡Œçš„å¼‚æ­¥ä»£ç \nä¾‹å¦‚ï¼š Promiseå¯¹è±¡.then() çš„å›è°ƒ\nJavaScript å†…éƒ¨ä»£ç å¦‚ä½•æ‰§è¡Œï¼Ÿ\næ‰§è¡Œç¬¬ä¸€ä¸ªscriptè„šæœ¬äº‹ä»¶å®ä»»åŠ¡é‡Œé¢çš„åŒæ­¥ä»£ç \né‡åˆ°å®ä»»åŠ¡/å¾®ä»»åŠ¡ äº¤ç»™å®¿ä¸»ç¯å¢ƒï¼ˆæµè§ˆå™¨/JSå¼•æ“ï¼‰ï¼Œæ‰§è¡Œåçš„å›è°ƒå‡½æ•°åˆ†åˆ«æ”¾åœ¨ ã€å¾®ä»»åŠ¡é˜Ÿåˆ—/å®ä»»åŠ¡é˜Ÿåˆ—ã€‘\nå½“æ‰§è¡Œæ ˆç©ºé—²æ—¶ï¼Œæ¸…ç©ºå¾®ä»»åŠ¡é˜Ÿåˆ—ï¼Œå†æ‰§è¡Œä¸‹ä¸€ä¸ªå®ä»»åŠ¡â€¦.\n8. Promise.all é™æ€æ–¹æ³• 1. æ¦‚å¿µï¼š åˆå¹¶å¤šä¸ªPromiseå¯¹è±¡ï¼Œç­‰å¾…æ‰€æœ‰åŒæ—¶æˆåŠŸå®Œæˆï¼ˆæˆ–æŸä¸€ä¸ªå¤±è´¥ï¼‰ï¼Œåšåç»­é€»è¾‘\nconst p = Promise.all([Promiseå¯¹è±¡, Promiseå¯¹è±¡, ...]) p.then(result =\u003e { // result ç»“æœï¼š[Promiseå¯¹è±¡æˆåŠŸç»“æœ, Promiseå¯¹è±¡æˆåŠŸç»“æœ, ...] }).catch(error =\u003e { // å¤±è´¥çš„promiseå¯¹è±¡ æŠ›å‡ºçš„å¼‚å¸¸ }) è¡¥å…… éªŒè¯ç æµç¨‹ 1. token è®¿é—®æƒé™ä»¤ç‰Œï¼Œæœ¬è´¨æ˜¯ä¸€ä¸²å­—ç¬¦ä¸²\nåˆ›å»ºï¼š æ­£ç¡®ç™»å½•åï¼Œç”±åç«¯ç­¾å‘è¿”å› ä½œç”¨ï¼šåˆ¤æ–­æ˜¯å¦æœ‰ç™»å½•çŠ¶æ€ç­‰ï¼Œæ§åˆ¶è®¿é—®æƒé™ æ³¨æ„ï¼š å‰ç«¯æ™ºèƒ½åˆ¤æ–­ token æ˜¯å¦å­˜åœ¨ï¼Œè€Œåç«¯æ‰èƒ½åˆ¤æ–­tokençš„æœ‰æ•ˆæ€§\n",
  "wordCount" : "6460",
  "inLanguage": "zh",
  "datePublished": "2024-03-23T00:00:00Z",
  "dateModified": "2024-03-23T00:00:00Z",
  "author":{
    "@type": "Person",
    "name": "Jingyi Wu"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://jingyiwu-codespace.github.io/zh/posts/tech/ajax/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Jingyi's Blog",
    "logo": {
      "@type": "ImageObject",
      "url": "https://jingyiwu-codespace.github.io/img/magic_rabbit_sixteen_icon.png"
    }
  }
}
</script>
</head>

<body class="" class=" top" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://jingyiwu-codespace.github.io/zh/" accesskey="h" title="Jingyi&#39;s Blog (Alt + H)">Jingyi&#39;s Blog</a>
                    <div class="logo-switches">
                        <button id="theme-toggle" accesskey="t" title="(Alt + T)"
                            onclick="javascript:location.reload();">
                            <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round">
                                <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                            </svg>
                            <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round">
                                <circle cx="12" cy="12" r="5"></circle>
                                <line x1="12" y1="1" x2="12" y2="3"></line>
                                <line x1="12" y1="21" x2="12" y2="23"></line>
                                <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                                <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                                <line x1="1" y1="12" x2="3" y2="12"></line>
                                <line x1="21" y1="12" x2="23" y2="12"></line>
                                <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                                <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                            </svg>
                        </button>
                        <ul class="lang-switch"><li>|</li>
                            <li>
                                <a href="https://jingyiwu-codespace.github.io/en/"
                                    title="English"
                                    aria-label="English">En</a>
                            </li>
                        </ul>
                    </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://jingyiwu-codespace.github.io/zh/posts/" title="åšå®¢">
                    <span>åšå®¢</span>
                </a>
            </li>
            <li>
                <a href="https://jingyiwu-codespace.github.io/zh/archives/" title="æ—¶é—´çº¿">
                    <span>æ—¶é—´çº¿</span>
                </a>
            </li>
            <li>
                <a href="https://jingyiwu-codespace.github.io/zh/tags/" title="æ ‡ç­¾">
                    <span>æ ‡ç­¾</span>
                </a>
            </li>
            <li>
                <a href="https://jingyiwu-codespace.github.io/zh/search" title="æœç´¢ (Alt &#43; /)" accesskey=/>
                    <span>æœç´¢</span>
                </a>
            </li>
            <li>
                <a href="https://jingyiwu-codespace.github.io/zh/msg" title="ç•™è¨€æ¿">
                    <span>ç•™è¨€æ¿</span>
                </a>
            </li>
        </ul>
    </nav>
</header><main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://jingyiwu-codespace.github.io/zh/">ä¸»é¡µ</a>&nbsp;Â»&nbsp;<a href="https://jingyiwu-codespace.github.io/zh/posts/">ğŸ“è®°å½•</a>&nbsp;Â»&nbsp;<a href="https://jingyiwu-codespace.github.io/zh/posts/tech/">ğŸ’» æŠ€æœ¯</a></div>

    <h1 class="post-title entry-hint-parent">
      å­¦ä¹ ï¼šAJAX 
    </h1>
    <div class="post-meta"><span title='2024-03-23 00:00:00 +0000 UTC'>ä¸‰æœˆ 23, 2024</span>&nbsp;Â·&nbsp;13 åˆ†é’Ÿ&nbsp;Â·&nbsp;Jingyi Wu

      <div class="meta-item">&nbspÂ·&nbsp
        <span id="busuanzi_container_page_pv">Views:<span id="busuanzi_value_page_pv"></span></span>
      </div>


    </div>
  </header> <div class="toc">
        <details >
            <summary accesskey="c" title="(Alt + C)">
                <span class="details">ç›®å½•</span>
            </summary>

            <div class="inner"><ul>
                    <li>
                        <a href="#day-1" aria-label="Day 1">Day 1</a><ul>

                                
                                <details>
                                    <summary accesskey="c" title="(Alt + C)">
                                        <span id="details_list">è¯¦æƒ…</span>
                                    </summary>
                    <li>
                        <a href="#1-ajax-%e5%af%bc%e5%85%a5" aria-label="1. AJAX å¯¼å…¥">1. AJAX å¯¼å…¥</a><ul>

                                
                                <details>
                                    <summary accesskey="c" title="(Alt + C)">
                                        <span id="details_list">è¯¦æƒ…</span>
                                    </summary>
                    <li>
                        <a href="#%e4%bb%80%e4%b9%88%e6%98%afajax-" aria-label="ä»€ä¹ˆæ˜¯AJAX ?">ä»€ä¹ˆæ˜¯AJAX ?</a></li>
                    <li>
                        <a href="#%e4%bd%bf%e7%94%a8-ajax" aria-label="ä½¿ç”¨ AJAX">ä½¿ç”¨ AJAX</a></li></ul>

                    </li>
                    <li>
                        <a href="#2-url" aria-label="2. URL">2. URL</a></li>
                    <li>
                        <a href="#3-axios%e9%94%99%e8%af%af%e5%a4%84%e7%90%86" aria-label="3. axiosé”™è¯¯å¤„ç†">3. axiosé”™è¯¯å¤„ç†</a></li>
                    <li>
                        <a href="#4-http%e5%8d%8f%e8%ae%ae---%e8%af%b7%e6%b1%82%e6%8a%a5%e6%96%87" aria-label="4. HTTPåè®® - è¯·æ±‚æŠ¥æ–‡">4. HTTPåè®® - è¯·æ±‚æŠ¥æ–‡</a><ul>

                                
                                <details>
                                    <summary accesskey="c" title="(Alt + C)">
                                        <span id="details_list">è¯¦æƒ…</span>
                                    </summary>
                    <li>
                        <a href="#%e8%af%b7%e6%b1%82%e6%8a%a5%e6%96%87%e7%9a%84%e7%bb%84%e6%88%90%e9%83%a8%e5%88%86" aria-label="è¯·æ±‚æŠ¥æ–‡çš„ç»„æˆéƒ¨åˆ†">è¯·æ±‚æŠ¥æ–‡çš„ç»„æˆéƒ¨åˆ†</a></li></ul>

                    </li>
                    <li>
                        <a href="#5-http%e5%8d%8f%e8%ae%ae---%e5%93%8d%e5%ba%94%e6%8a%a5%e6%96%87" aria-label="5. HTTPåè®® - å“åº”æŠ¥æ–‡">5. HTTPåè®® - å“åº”æŠ¥æ–‡</a></li>
                    <li>
                        <a href="#6-%e6%8e%a5%e5%8f%a3%e6%96%87%e6%a1%a3" aria-label="6. æ¥å£æ–‡æ¡£">6. æ¥å£æ–‡æ¡£</a></li>
                    <li>
                        <a href="#7-form-serialize-%e6%8f%92%e4%bb%b6" aria-label="7. form-serialize æ’ä»¶">7. form-serialize æ’ä»¶</a></li>
                    <li>
                        <a href="#8-api%e8%a6%81%e6%b1%82%e8%af%b7%e6%b1%82%e4%bd%93formdata" aria-label="8. APIè¦æ±‚è¯·æ±‚ä½“FormData()">8. APIè¦æ±‚è¯·æ±‚ä½“FormData()</a></li></ul>

                    </li>
                    <li>
                        <a href="#day3" aria-label="Day3">Day3</a><ul>

                                
                                <details>
                                    <summary accesskey="c" title="(Alt + C)">
                                        <span id="details_list">è¯¦æƒ…</span>
                                    </summary>
                    <li>
                        <a href="#1-ajax-%e5%8e%9f%e7%90%86---xmlhttprequest" aria-label="1. AJAX åŸç† - XMLHttpRequest">1. AJAX åŸç† - XMLHttpRequest</a><ul>

                                
                                <details>
                                    <summary accesskey="c" title="(Alt + C)">
                                        <span id="details_list">è¯¦æƒ…</span>
                                    </summary>
                    <li>
                        <a href="#1-%e4%bd%bf%e7%94%a8-xmlhttprequest" aria-label="1. ä½¿ç”¨ XMLHttpRequest">1. ä½¿ç”¨ XMLHttpRequest</a></li>
                    <li>
                        <a href="#2-xmlhttprequest---%e6%9f%a5%e8%af%a2%e5%8f%82%e6%95%b0" aria-label="2. XMLHttpRequest  -æŸ¥è¯¢å‚æ•°">2. XMLHttpRequest  -æŸ¥è¯¢å‚æ•°</a></li>
                    <li>
                        <a href="#3-urlsearchparams" aria-label="3. URLSearchParams()">3. URLSearchParams()</a></li>
                    <li>
                        <a href="#4-xmlhttprequest-%e6%95%b0%e6%8d%ae%e6%8f%90%e4%ba%a4" aria-label="4. XMLHttpRequest() æ•°æ®æäº¤">4. XMLHttpRequest() æ•°æ®æäº¤</a></li></ul>

                    </li>
                    <li>
                        <a href="#2-promise%e5%af%b9%e8%b1%a1" aria-label="2. Promiseå¯¹è±¡">2. Promiseå¯¹è±¡</a><ul>

                                
                                <details>
                                    <summary accesskey="c" title="(Alt + C)">
                                        <span id="details_list">è¯¦æƒ…</span>
                                    </summary>
                    <li>
                        <a href="#1-%e4%ba%86%e8%a7%a3" aria-label="1. äº†è§£">1. äº†è§£</a></li>
                    <li>
                        <a href="#2-promise-%e4%b8%89%e7%a7%8d%e7%8a%b6%e6%80%81" aria-label="2. Promise ä¸‰ç§çŠ¶æ€">2. Promise ä¸‰ç§çŠ¶æ€</a></li></ul>

                    </li></ul>

                    </li>
                    <li>
                        <a href="#day4" aria-label="Day4">Day4</a><ul>

                                
                                <details>
                                    <summary accesskey="c" title="(Alt + C)">
                                        <span id="details_list">è¯¦æƒ…</span>
                                    </summary>
                    <li>
                        <a href="#1-%e5%90%8c%e6%ad%a5%e4%bb%a3%e7%a0%81%e5%bc%82%e6%ad%a5%e4%bb%a3%e7%a0%81" aria-label="1. åŒæ­¥ä»£ç &amp;å¼‚æ­¥ä»£ç ">1. åŒæ­¥ä»£ç &amp;å¼‚æ­¥ä»£ç </a></li>
                    <li>
                        <a href="#2-%e5%9b%9e%e8%b0%83%e5%87%bd%e6%95%b0%e5%9c%b0%e7%8b%b1" aria-label="2. å›è°ƒå‡½æ•°åœ°ç‹±">2. å›è°ƒå‡½æ•°åœ°ç‹±</a></li>
                    <li>
                        <a href="#3-promise---%e9%93%be%e5%bc%8f%e8%b0%83%e7%94%a8" aria-label="3. Promise - é“¾å¼è°ƒç”¨">3. Promise - é“¾å¼è°ƒç”¨</a></li>
                    <li>
                        <a href="#4-async%e5%87%bd%e6%95%b0%e5%92%8cawait" aria-label="4. asyncå‡½æ•°å’Œawait">4. asyncå‡½æ•°å’Œawait</a><ul>

                                
                                <details>
                                    <summary accesskey="c" title="(Alt + C)">
                                        <span id="details_list">è¯¦æƒ…</span>
                                    </summary>
                    <li>
                        <a href="#1-%e5%ae%9a%e4%b9%89" aria-label="1. å®šä¹‰">1. å®šä¹‰</a></li>
                    <li>
                        <a href="#2-%e6%a1%88%e4%be%8b" aria-label="2. æ¡ˆä¾‹">2. æ¡ˆä¾‹</a></li>
                    <li>
                        <a href="#3-%e6%ad%a5%e9%aa%a4" aria-label="3. æ­¥éª¤">3. æ­¥éª¤</a></li></ul>

                    </li>
                    <li>
                        <a href="#5-async%e5%87%bd%e6%95%b0%e5%92%8cawait-%e6%8d%95%e8%8e%b7%e9%94%99%e8%af%af" aria-label="5. asyncå‡½æ•°å’Œawait æ•è·é”™è¯¯">5. asyncå‡½æ•°å’Œawait æ•è·é”™è¯¯</a><ul>

                                
                                <details>
                                    <summary accesskey="c" title="(Alt + C)">
                                        <span id="details_list">è¯¦æƒ…</span>
                                    </summary>
                    <li>
                        <a href="#1-trycatch" aria-label="1. try&hellip;catch">1. try&hellip;catch</a></li></ul>

                    </li>
                    <li>
                        <a href="#6-%e4%ba%8b%e4%bb%b6%e5%be%aa%e7%8e%af-eventloop" aria-label="6. äº‹ä»¶å¾ªç¯ (EventLoop)">6. äº‹ä»¶å¾ªç¯ (EventLoop)</a><ul>

                                
                                <details>
                                    <summary accesskey="c" title="(Alt + C)">
                                        <span id="details_list">è¯¦æƒ…</span>
                                    </summary>
                    <li>
                        <a href="#1-%e6%a6%82%e5%bf%b5" aria-label="1. æ¦‚å¿µ">1. æ¦‚å¿µ</a></li>
                    <li>
                        <a href="#2-%e5%8e%9f%e5%9b%a0" aria-label="2. åŸå› ">2. åŸå› </a></li>
                    <li>
                        <a href="#3-%e6%89%a7%e8%a1%8c%e8%bf%87%e7%a8%8b" aria-label="3. æ‰§è¡Œè¿‡ç¨‹">3. æ‰§è¡Œè¿‡ç¨‹</a></li>
                    <li>
                        <a href="#4-%e6%80%bb%e7%bb%93" aria-label="4. æ€»ç»“">4. æ€»ç»“</a></li></ul>

                    </li>
                    <li>
                        <a href="#7-%e5%ae%8f%e4%bb%bb%e5%8a%a1%e4%b8%8e%e5%be%ae%e4%bb%bb%e5%8a%a1" aria-label="7. å®ä»»åŠ¡ä¸å¾®ä»»åŠ¡">7. å®ä»»åŠ¡ä¸å¾®ä»»åŠ¡</a><ul>

                                
                                <details>
                                    <summary accesskey="c" title="(Alt + C)">
                                        <span id="details_list">è¯¦æƒ…</span>
                                    </summary>
                    <li>
                        <a href="#1-%e6%80%bb%e7%bb%93" aria-label="1. æ€»ç»“">1. æ€»ç»“</a></li></ul>

                    </li>
                    <li>
                        <a href="#8-promiseall-%e9%9d%99%e6%80%81%e6%96%b9%e6%b3%95" aria-label="8. Promise.all é™æ€æ–¹æ³•">8. Promise.all é™æ€æ–¹æ³•</a><ul>

                                
                                <details>
                                    <summary accesskey="c" title="(Alt + C)">
                                        <span id="details_list">è¯¦æƒ…</span>
                                    </summary>
                    <li>
                        <a href="#1-%e6%a6%82%e5%bf%b5-1" aria-label="1. æ¦‚å¿µï¼š">1. æ¦‚å¿µï¼š</a></li></ul>

                    </li></ul>

                    </li>
                    <li>
                        <a href="#%e8%a1%a5%e5%85%85-%e9%aa%8c%e8%af%81%e7%a0%81%e6%b5%81%e7%a8%8b" aria-label="è¡¥å…… éªŒè¯ç æµç¨‹">è¡¥å…… éªŒè¯ç æµç¨‹</a><ul>

                                
                                <details>
                                    <summary accesskey="c" title="(Alt + C)">
                                        <span id="details_list">è¯¦æƒ…</span>
                                    </summary>
                    <li>
                        <a href="#1-token" aria-label="1. token">1. token</a>
                    </li>
                </ul>
                </li>
                </ul>
            </div>
        </details>
    </div>
  <div class="post-content"><h1 id="day-1">Day 1<a hidden class="anchor" aria-hidden="true" href="#day-1">#</a></h1>
<h2 id="1-ajax-å¯¼å…¥">1. AJAX å¯¼å…¥<a hidden class="anchor" aria-hidden="true" href="#1-ajax-å¯¼å…¥">#</a></h2>
<h3 id="ä»€ä¹ˆæ˜¯ajax-">ä»€ä¹ˆæ˜¯AJAX ?<a hidden class="anchor" aria-hidden="true" href="#ä»€ä¹ˆæ˜¯ajax-">#</a></h3>
<ul>
<li>
<p>å¼‚æ­¥çš„ JavaScript å’Œ XML (Asynchronous JavaScript And XML)</p>
</li>
<li>
<p>ä½¿ç”¨<code>XMLHttpRequest</code> å¯¹è±¡ä¸æœåŠ¡å™¨é€šä¿¡ï¼Œå¯ä»¥ä½¿ç”¨<code>JSON/ XML/ HTML/ text </code> æ–‡æœ¬ç­‰æ ¼å¼å‘é€å’Œæ¥å—æ•°æ®ã€‚</p>
</li>
<li>
<p>AJAX æœ‰å¼‚æ­¥ç‰¹æ€§ï¼Œåœ¨ä¸é‡æ–°åˆ·æ–°é¡µé¢çš„æƒ…å†µä¸‹ä¸æœåŠ¡å™¨é€šä¿¡ï¼Œäº¤æ¢æ•°æ®ï¼Œæˆ–æ›´æ–°é¡µé¢</p>
</li>
</ul>
<h3 id="ä½¿ç”¨-ajax">ä½¿ç”¨ AJAX<a hidden class="anchor" aria-hidden="true" href="#ä½¿ç”¨-ajax">#</a></h3>
<ul>
<li>
<p>ä½¿ç”¨ <code>axios</code> åº“ï¼Œä¸æœåŠ¡å™¨è¿›è¡Œæ•°æ®é€šä¿¡</p>
<p>å°†<code>XMLHttpRequest</code>å°è£…ï¼Œä»£ç ç®€å•</p>
<p>Vue React é¡¹ç›®ä¸­éƒ½ä¼šä½¿ç”¨ <code>axios</code></p>
<div class="highlight"><pre tabindex="0" style="color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#d7827e">axios</span><span style="color:#797593">({</span>
</span></span><span style="display:flex;"><span>    <span style="color:#d7827e">url</span><span style="color:#797593">:</span> <span style="color:#ea9d34">&#39;http://hmajax.itheima.net/api/province&#39;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#9893a5">//&#39;è¯·æ±‚çš„æœåŠ¡å™¨è¿æ¥&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#9893a5"></span><span style="color:#797593">}).</span><span style="color:#d7827e">then</span><span style="color:#797593">(</span><span style="color:#d7827e">result</span><span style="color:#797593">)=&gt;{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#9893a5">// å¯¹æœåŠ¡å™¨è¿”å›çš„æ•°æ®åšåç»­å¤„ç†
</span></span></span><span style="display:flex;"><span><span style="color:#9893a5"></span><span style="color:#797593">}</span>
</span></span></code></pre></div></li>
<li>
<p>å­¦ä¹ <code>XMLHttpRequest</code>å¯¹è±¡ï¼Œäº†è§£AJAXåº•å±‚åŸç†</p>
</li>
</ul>
<h2 id="2-url">2. URL<a hidden class="anchor" aria-hidden="true" href="#2-url">#</a></h2>
<ol>
<li>
<p>httpåè®®ï¼š è¶…æ–‡æœ¬ä¼ è¾“åè®®ï¼Œè§„å®šæµè§ˆå™¨å’ŒæœåŠ¡å™¨ä¹‹é—´ä¼ è¾“æ•°æ®çš„æ ¼å¼</p>
<p><img loading="lazy" src="/img/Javascript/image-20240323121243815.png" alt="image-20240323121243815"  />
</p>
<p>ç½‘å€ï¼š <a href="http://hmajax.itheima.net/api/province">http://hmajax.itheima.net/api/province</a></p>
<p>ç½‘å€ï¼šåè®®://åŸŸå/èµ„æºè·¯å¾„</p>
<table>
<thead>
<tr>
<th>åç§°</th>
<th>ç½‘å€</th>
<th>ä½œç”¨</th>
</tr>
</thead>
<tbody>
<tr>
<td>åè®®</td>
<td>http</td>
<td>è§„å®šä¼ è¾“æ•°æ®çš„æ ¼å¼</td>
</tr>
<tr>
<td>åŸŸå</td>
<td>hmajax.itheima.net</td>
<td>æ ‡è®°æœåŠ¡å™¨åœ¨äº’è”ç½‘ä¸­çš„æ–¹ä½</td>
</tr>
<tr>
<td>èµ„æºè·¯å¾„</td>
<td>/api/province</td>
<td>æ ‡è®°èµ„æºåœ¨æœåŠ¡å™¨ä¸‹çš„å…·ä½“ä½ç½®</td>
</tr>
</tbody>
</table>
</li>
<li>
<p>URL æŸ¥è¯¢å‚æ•°</p>
</li>
</ol>
<blockquote>
<p>æµè§ˆå™¨æä¾›ç»™æœåŠ¡å™¨çš„é¢å¤–ä¿¡æ¯ï¼Œè®©æœåŠ¡å™¨è¿”å›æµè§ˆå™¨æƒ³è¦çš„æ•°æ®</p>
</blockquote>
<p>â€‹	 <a href="http://xxxx.com/xxx/xxx?param1">http://xxxx.com/xxx/xxx?param1</a> = value &amp;&amp; param2 = value2</p>
<p><img loading="lazy" src="/img/Javascript/image-20240323221541982.png" alt="image-20240323221541982"  />
</p>
<p>â€‹	Axios æŸ¥è¯¢å‚æ•°</p>
<ul>
<li>axios æä¾› <code>params</code> é€‰é¡¹</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#d7827e">axios</span><span style="color:#797593">({</span>
</span></span><span style="display:flex;"><span>    <span style="color:#d7827e">url</span><span style="color:#797593">:</span><span style="color:#ea9d34">&#39; http://hmajax.itheima.net&#39;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#d7827e">params</span><span style="color:#797593">:</span> <span style="color:#797593">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#d7827e">pname</span><span style="color:#797593">:</span><span style="color:#ea9d34">&#39;æ²³åŒ—çœ&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#797593">}</span>
</span></span><span style="display:flex;"><span>      <span style="color:#797593">}).</span><span style="color:#d7827e">then</span><span style="color:#797593">(</span><span style="color:#d7827e">result</span><span style="color:#797593">=&gt;{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#9893a5">// å¤„ç†åç»­code
</span></span></span><span style="display:flex;"><span><span style="color:#9893a5"></span><span style="color:#797593">})</span>
</span></span></code></pre></div><ol start="3">
<li>å¸¸ç”¨çš„è¯·æ±‚æ–¹æ³•</li>
</ol>
<blockquote>
<p>å¯¹æœåŠ¡å™¨èµ„æºï¼Œæ‰§è¡Œçš„æ“ä½œ</p>
</blockquote>
<table>
<thead>
<tr>
<th>è¯·æ±‚æ–¹æ³•</th>
<th>æ“ä½œ</th>
</tr>
</thead>
<tbody>
<tr>
<td>GET</td>
<td>è·å–æ•°æ®</td>
</tr>
<tr>
<td>POST</td>
<td>æäº¤æ•°æ®</td>
</tr>
<tr>
<td>PUT</td>
<td>ä¿®æ”¹æ•°æ® (å…¨éƒ¨)</td>
</tr>
<tr>
<td>DELETE</td>
<td>åˆ é™¤æ•°æ®</td>
</tr>
<tr>
<td>PATCH</td>
<td>ä¿®æ”¹æ•°æ® (éƒ¨åˆ†)</td>
</tr>
</tbody>
</table>
<ul>
<li>
<p>axios è¯·æ±‚é…ç½®</p>
<p><code>url</code>ï¼šè¯·æ±‚URLç½‘å€</p>
<p><code>method</code>ï¼šè¯·æ±‚æ–¹æ³•ï¼ŒGETå¯ä»¥çœç•¥ï¼ˆä¸åŒºåˆ†å¤§å°å†™ï¼‰</p>
<p><code>data</code>ï¼šæäº¤çš„æ•°æ®</p>
<p><code>header</code>: è¯·æ±‚å¤´æ•°æ®ï¼Œé€šå¸¸ç”¨äºä¼ é€’<code>token</code>ï¼Œå¯ä»¥åœ¨axiosä¸­çš„è¯·æ±‚æ‹¦æˆªå™¨ä¸­è®¾ç½®å…¬å…±çš„ headers é€‰é¡¹</p>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#d7827e">axios</span><span style="color:#797593">({</span>
</span></span><span style="display:flex;"><span>    <span style="color:#d7827e">url</span> <span style="color:#797593">:</span> <span style="color:#ea9d34">&#39;ç›®æ ‡èµ„æºåœ°å€&#39;</span><span style="color:#797593">,</span>
</span></span><span style="display:flex;"><span>    <span style="color:#d7827e">method</span> <span style="color:#797593">:</span> <span style="color:#ea9d34">&#39;è¯·æ±‚æ–¹æ³•&#39;</span><span style="color:#797593">,</span> 
</span></span><span style="display:flex;"><span>    <span style="color:#d7827e">data</span> <span style="color:#797593">:</span><span style="color:#797593">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#d7827e">params</span> <span style="color:#b4637a">ï¼š</span><span style="color:#d7827e">value</span>
</span></span><span style="display:flex;"><span>    <span style="color:#797593">}</span>
</span></span><span style="display:flex;"><span><span style="color:#797593">}).</span><span style="color:#d7827e">then</span><span style="color:#797593">((</span><span style="color:#d7827e">result</span><span style="color:#797593">)=&gt;{</span>
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span><span style="color:#797593">})</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#d7827e">axios</span><span style="color:#797593">({</span>
</span></span><span style="display:flex;"><span>    <span style="color:#d7827e">url</span><span style="color:#797593">:</span><span style="color:#ea9d34">&#39;&#39;</span><span style="color:#797593">,</span>
</span></span><span style="display:flex;"><span>    <span style="color:#d7827e">headers</span><span style="color:#797593">:</span> <span style="color:#797593">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#d7827e">Authorization</span><span style="color:#797593">:</span> <span style="color:#ea9d34">`Bearer </span><span style="color:#ea9d34">${</span><span style="color:#d7827e">token</span><span style="color:#ea9d34">}</span><span style="color:#ea9d34">`</span>
</span></span><span style="display:flex;"><span>        <span style="color:#9893a5">// Beareræ˜¯æˆæƒç±»å‹
</span></span></span><span style="display:flex;"><span><span style="color:#9893a5"></span>    <span style="color:#797593">}</span>
</span></span><span style="display:flex;"><span><span style="color:#797593">})</span>
</span></span></code></pre></div><ul>
<li>axios è¯·æ±‚æ‹¦æˆªå™¨ï¼šæœ¬è´¨æ˜¯é…ç½®å‡½æ•°ï¼Œåœ¨å‘èµ·è¯·æ±‚ä¹‹å‰è§¦å‘ï¼Œå¯¹è¯·æ±‚å‚æ•°è¿›è¡Œé¢å¤–é…ç½®ã€‚ä¸€èˆ¬æ”¾åœ¨åŸºåœ°å€<code>.baseURL</code>çš„<code>.js</code>å†…</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#d7827e">axios</span><span style="color:#797593">.</span><span style="color:#d7827e">interceptor</span><span style="color:#797593">.</span><span style="color:#d7827e">request</span><span style="color:#797593">.</span><span style="color:#d7827e">use</span><span style="color:#797593">(</span><span style="color:#286983">function</span> <span style="color:#797593">(</span><span style="color:#d7827e">config</span><span style="color:#797593">)</span> <span style="color:#797593">{</span>
</span></span><span style="display:flex;"><span>  <span style="color:#286983">const</span> <span style="color:#d7827e">token</span> <span style="color:#797593">=</span> <span style="color:#d7827e">location</span><span style="color:#797593">.</span><span style="color:#d7827e">getItem</span><span style="color:#797593">(</span><span style="color:#ea9d34">&#39;token&#39;</span><span style="color:#797593">)</span>
</span></span><span style="display:flex;"><span>  <span style="color:#d7827e">token</span> <span style="color:#797593">&amp;&amp;</span> <span style="color:#d7827e">config</span><span style="color:#797593">.</span><span style="color:#d7827e">headers</span><span style="color:#797593">.</span><span style="color:#d7827e">Authorization</span> <span style="color:#797593">=</span> <span style="color:#ea9d34">`Bearer </span><span style="color:#ea9d34">${</span><span style="color:#d7827e">token</span><span style="color:#ea9d34">}</span><span style="color:#ea9d34">`</span>
</span></span><span style="display:flex;"><span>  <span style="color:#9893a5">// åœ¨å‘é€è¯·æ±‚ä¹‹å‰åšäº›ä»€ä¹ˆ
</span></span></span><span style="display:flex;"><span><span style="color:#9893a5"></span>  <span style="color:#286983">return</span> <span style="color:#d7827e">config</span>
</span></span><span style="display:flex;"><span><span style="color:#797593">},</span> <span style="color:#286983">function</span> <span style="color:#797593">(</span><span style="color:#d7827e">error</span><span style="color:#797593">)</span> <span style="color:#797593">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#9893a5">// å¯¹è¯·æ±‚é”™è¯¯åšäº›ä»€ä¹ˆ
</span></span></span><span style="display:flex;"><span><span style="color:#9893a5"></span>  <span style="color:#286983">return</span> <span style="color:#d7827e">Promise</span><span style="color:#797593">.</span><span style="color:#d7827e">reject</span><span style="color:#797593">(</span><span style="color:#d7827e">error</span><span style="color:#797593">)</span>
</span></span><span style="display:flex;"><span><span style="color:#797593">})</span>
</span></span></code></pre></div><ul>
<li>
<p>Axios å“åº”æ‹¦æˆªå™¨</p>
<p>å“åº”(response)å›åˆ° <code>then/catch</code>ä¹‹å‰ï¼Œè§¦å‘çš„æ‹¦æˆªå‡½æ•°ï¼Œå¯¹å“åº”ç»“æœç»Ÿä¸€å¤„ç†ï¼Œä¾‹å¦‚èº«ä»½éªŒè¯å¤±è´¥ï¼Œç»Ÿä¸€åˆ¤æ–­å¹¶ä½œå¤„ç†ï¼›å¦‚æœæˆåŠŸè®¾ç½®è¿”å›æ•°æ®å¯¹è±¡é‡Œçš„æŸä¸ªå±æ€§ï¼Œåœ¨å…¶ä»–æ“ä½œä¸­æ›´åŠ ç®€æ´ã€‚ä¸€èˆ¬æ”¾åœ¨åŸºåœ°å€<code>.baseURL</code>çš„<code>.js</code>å†…</p>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#9893a5">// æ·»åŠ å“åº”æ‹¦æˆªå™¨
</span></span></span><span style="display:flex;"><span><span style="color:#9893a5"></span><span style="color:#d7827e">axios</span><span style="color:#797593">.</span><span style="color:#d7827e">interceptors</span><span style="color:#797593">.</span><span style="color:#d7827e">response</span><span style="color:#797593">.</span><span style="color:#d7827e">use</span><span style="color:#797593">(</span><span style="color:#286983">function</span> <span style="color:#797593">(</span><span style="color:#d7827e">response</span><span style="color:#797593">)</span> <span style="color:#797593">{</span>
</span></span><span style="display:flex;"><span>  <span style="color:#9893a5">// 2xx èŒƒå›´å†…çš„çŠ¶æ€ç éƒ½ä¼šè§¦å‘è¯¥å‡½æ•°
</span></span></span><span style="display:flex;"><span><span style="color:#9893a5"></span>  <span style="color:#9893a5">// å¯¹å“åº”æ•°æ® è¿”å›å¯¹è±¡ä¸­çš„ dataå±æ€§
</span></span></span><span style="display:flex;"><span><span style="color:#9893a5"></span>  <span style="color:#286983">const</span> <span style="color:#d7827e">result</span> <span style="color:#797593">=</span> <span style="color:#d7827e">response</span><span style="color:#797593">.</span><span style="color:#d7827e">data</span>
</span></span><span style="display:flex;"><span>  <span style="color:#9893a5">// ä¸ç”¨å†™ response.data.dataè¿™ä¹ˆç¹ç
</span></span></span><span style="display:flex;"><span><span style="color:#9893a5"></span>  <span style="color:#286983">return</span> <span style="color:#d7827e">result</span><span style="color:#797593">;</span>
</span></span><span style="display:flex;"><span><span style="color:#797593">},</span> <span style="color:#286983">function</span> <span style="color:#797593">(</span><span style="color:#d7827e">error</span><span style="color:#797593">)</span> <span style="color:#797593">{</span>
</span></span><span style="display:flex;"><span>  <span style="color:#286983">if</span> <span style="color:#797593">(</span><span style="color:#d7827e">error</span><span style="color:#797593">?</span><span style="color:#797593">.</span><span style="color:#d7827e">response</span><span style="color:#797593">?</span><span style="color:#797593">.</span><span style="color:#d7827e">status</span> <span style="color:#797593">===</span> <span style="color:#ea9d34">401</span><span style="color:#797593">)</span> <span style="color:#797593">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#9893a5">// è¿™æ˜¯ä¸€ä¸ªæ¡ä»¶è¯­å¥ï¼Œé¦–å…ˆæ£€æŸ¥ error å¯¹è±¡æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœå­˜åœ¨åˆ™ç»§ç»­æ£€æŸ¥å…¶ response å±æ€§æ˜¯å¦å­˜åœ¨ï¼Œ
</span></span></span><span style="display:flex;"><span><span style="color:#9893a5"></span>    <span style="color:#9893a5">// æœ€åå†æ£€æŸ¥ response å¯¹è±¡ä¸­çš„ status å±æ€§æ˜¯å¦ç­‰äº 401ã€‚è¿™é‡Œä½¿ç”¨äº†å¯é€‰é“¾æ“ä½œç¬¦ ?.
</span></span></span><span style="display:flex;"><span><span style="color:#9893a5"></span>    <span style="color:#9893a5">// ä»¥é¿å…å½“æŸäº›å±æ€§ä¸º null æˆ– undefined æ—¶å¼•å‘é”™è¯¯ã€‚
</span></span></span><span style="display:flex;"><span><span style="color:#9893a5"></span>    <span style="color:#d7827e">alert</span><span style="color:#797593">(</span><span style="color:#ea9d34">&#39;ç™»å½•çŠ¶æ€è¿‡æœŸï¼Œè¯·é‡æ–°ç™»å½•&#39;</span><span style="color:#797593">)</span>
</span></span><span style="display:flex;"><span>    <span style="color:#d7827e">localStorage</span><span style="color:#797593">.</span><span style="color:#d7827e">clear</span><span style="color:#797593">()</span>
</span></span><span style="display:flex;"><span>    <span style="color:#d7827e">location</span><span style="color:#797593">.</span><span style="color:#d7827e">href</span> <span style="color:#797593">=</span> <span style="color:#ea9d34">&#39;login/index.html&#39;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#797593">}</span>
</span></span><span style="display:flex;"><span>  <span style="color:#286983">return</span> <span style="color:#d7827e">Promise</span><span style="color:#797593">.</span><span style="color:#d7827e">reject</span><span style="color:#797593">(</span><span style="color:#d7827e">error</span><span style="color:#797593">);</span>
</span></span><span style="display:flex;"><span><span style="color:#797593">});</span>
</span></span></code></pre></div><p>æ€»ç»“ï¼š</p>
<ol>
<li>
<p>è¯·æ±‚æ–¹æ³•è¡¨æ˜å¯¹æœåŠ¡å™¨èµ„æºçš„æ“ä½œï¼ŒPOST æäº¤æ•°æ® GETæŸ¥è¯¢æ•°æ®</p>
</li>
<li>
<p>axios æ ¸å¿ƒé…ç½®</p>
<p>url ï¼šè¯·æ±‚URLç½‘å€</p>
<p>method : è¯·æ±‚æ–¹æ³•ï¼Œ getå¯ä»¥çœç•¥</p>
<p>params ï¼š æŸ¥è¯¢å‚æ•°</p>
<p>data ï¼š æäº¤æ•°æ®, è¯·æ±‚ä½“</p>
</li>
<li>
<p>axios æ˜¯ä¸€ä¸ªè°ƒç”¨å‡½æ•°ï¼Œå¯¹è¯·æ±‚å‚æ•°è¿›è¡Œè®¾ç½®</p>
<p>åœ¨å…¬å…±é…ç½®å’Œè®¾ç½®æ˜¯ï¼Œç»Ÿä¸€è®¾ç½®åœ¨è¯·æ±‚æ‹¦æˆªå™¨ä¸­</p>
</li>
</ol>
<ul>
<li>
<p><strong>åœ¨ axiosçš„ä½¿ç”¨ä¸­ï¼Œå‘ç°dataåé¢æ—¶å¯¹è±¡çš„æ ¼å¼ï¼Œä¼šè‡ªåŠ¨è½¬æ¢æˆjsonæ ¼å¼</strong></p>
</li>
<li>
<p>æµè§ˆå™¨å‘é€è‡³æœåŠ¡å™¨ å«åš è¯·æ±‚ä½“ï¼Œ åœ¨network -&gt; playloadä¸­å¯ä»¥æŸ¥çœ‹</p>
</li>
<li>
<p>æœåŠ¡å™¨è¿”å›ç»™æµè§ˆå™¨ å«åš å“åº”ä½“ï¼Œ åœ¨ network -&gt; å“åº”ä¸­å¯ä»¥æŸ¥çœ‹</p>
</li>
</ul>
<h2 id="3-axiosé”™è¯¯å¤„ç†">3. axiosé”™è¯¯å¤„ç†<a hidden class="anchor" aria-hidden="true" href="#3-axiosé”™è¯¯å¤„ç†">#</a></h2>
<blockquote>
<p>Axios ä¼šåœ¨æ§åˆ¶å°è¿”å›é”™è¯¯ä¿¡æ¯ï¼Œ ä¸ºäº†å¢åŠ ç”¨æˆ·ä½“éªŒï¼Œå¼€å‘äººå‘˜å¯ä»¥è®²é”™è¯¯ä¿¡æ¯ä»¥æ¢çŸ¿çš„å½¢å¼å±•ç°ç»™ç”¨æˆ·</p>
</blockquote>
<p>è¯­æ³•ï¼š åœ¨ <code>then</code> æ–¹æ³•çš„åé¢ï¼Œé€šè¿‡ç‚¹è¯­æ³•è°ƒç”¨ <code>catch</code> æ–¹æ³•ï¼Œä¼ å…¥å›è°ƒå‡½æ•°å¹¶å®šä¹‰å½¢å‚</p>
<div class="highlight"><pre tabindex="0" style="color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#d7827e">axios</span><span style="color:#797593">({</span>
</span></span><span style="display:flex;"><span>    <span style="color:#9893a5">// è¯·æ±‚é€‰é¡¹
</span></span></span><span style="display:flex;"><span><span style="color:#9893a5"></span><span style="color:#797593">}).</span><span style="color:#d7827e">then</span><span style="color:#797593">(</span><span style="color:#d7827e">result</span><span style="color:#797593">=&gt;{</span>
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span><span style="color:#797593">}).</span><span style="color:#286983">catch</span><span style="color:#797593">(</span><span style="color:#d7827e">error</span><span style="color:#797593">=&gt;{</span>
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span><span style="color:#797593">})</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#d7827e">axios</span><span style="color:#797593">({</span>
</span></span><span style="display:flex;"><span>      <span style="color:#d7827e">url</span><span style="color:#797593">:</span> <span style="color:#ea9d34">&#39;http://hmajax.itheima.net/api/register&#39;</span><span style="color:#797593">,</span>
</span></span><span style="display:flex;"><span>      <span style="color:#d7827e">method</span><span style="color:#797593">:</span> <span style="color:#ea9d34">&#39;post&#39;</span><span style="color:#797593">,</span>
</span></span><span style="display:flex;"><span>      <span style="color:#d7827e">data</span><span style="color:#797593">:</span> <span style="color:#797593">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ea9d34">&#39;username&#39;</span><span style="color:#797593">:</span> <span style="color:#ea9d34">&#39;itheima789&#39;</span><span style="color:#797593">,</span>
</span></span><span style="display:flex;"><span>        <span style="color:#ea9d34">&#39;password&#39;</span><span style="color:#797593">:</span> <span style="color:#ea9d34">&#39;123456&#39;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#797593">}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#797593">}).</span><span style="color:#d7827e">then</span><span style="color:#797593">(</span><span style="color:#d7827e">result</span> <span style="color:#797593">=&gt;</span> <span style="color:#797593">{</span>
</span></span><span style="display:flex;"><span>      <span style="color:#d7827e">console</span><span style="color:#797593">.</span><span style="color:#d7827e">log</span><span style="color:#797593">(</span><span style="color:#d7827e">result</span><span style="color:#797593">)</span>
</span></span><span style="display:flex;"><span>    <span style="color:#797593">}).</span><span style="color:#286983">catch</span><span style="color:#797593">(</span><span style="color:#d7827e">error</span> <span style="color:#797593">=&gt;</span> <span style="color:#797593">{</span>
</span></span><span style="display:flex;"><span>      <span style="color:#d7827e">console</span><span style="color:#797593">.</span><span style="color:#d7827e">log</span><span style="color:#797593">(</span><span style="color:#d7827e">error</span><span style="color:#797593">)</span>
</span></span><span style="display:flex;"><span>      <span style="color:#d7827e">console</span><span style="color:#797593">.</span><span style="color:#d7827e">log</span><span style="color:#797593">(</span><span style="color:#d7827e">error</span><span style="color:#797593">.</span><span style="color:#d7827e">response</span><span style="color:#797593">.</span><span style="color:#d7827e">data</span><span style="color:#797593">.</span><span style="color:#d7827e">message</span><span style="color:#797593">)</span>
</span></span><span style="display:flex;"><span>    <span style="color:#9893a5">// é”™è¯¯ä¿¡æ¯å­˜æ”¾çš„ä½ç½®
</span></span></span><span style="display:flex;"><span><span style="color:#9893a5"></span>    <span style="color:#d7827e">alert</span><span style="color:#b4637a">ï¼ˆ</span><span style="color:#d7827e">error</span><span style="color:#797593">.</span><span style="color:#d7827e">response</span><span style="color:#797593">.</span><span style="color:#d7827e">data</span><span style="color:#797593">.</span><span style="color:#d7827e">message</span><span style="color:#b4637a">ï¼‰</span>
</span></span><span style="display:flex;"><span>    <span style="color:#797593">})</span>
</span></span></code></pre></div><h2 id="4-httpåè®®---è¯·æ±‚æŠ¥æ–‡">4. HTTPåè®® - è¯·æ±‚æŠ¥æ–‡<a hidden class="anchor" aria-hidden="true" href="#4-httpåè®®---è¯·æ±‚æŠ¥æ–‡">#</a></h2>
<ul>
<li>HTTP åè®®ï¼š è§„å®šäº†æµè§ˆå™¨å‘é€æœåŠ¡å™¨è¿”å›å†…å®¹çš„æ ¼å¼</li>
<li>è¯·æ±‚æŠ¥æ–‡ï¼šæµè§ˆå™¨æŒ‰ç…§HTTP åè®®è¦æ±‚çš„æ ¼å¼ï¼Œå‘é€ç»™æœåŠ¡å™¨çš„å†…å®¹ã€‚æ‰€ä»¥è¯·æ±‚æŠ¥æ–‡å°±æ˜¯éµå®ˆæ ¼å¼çš„å†…å®¹é›†åˆ</li>
</ul>
<p><img loading="lazy" src="/img/Javascript/image-20240323234251464.png" alt="image-20240323234251464"  />
</p>
<h3 id="è¯·æ±‚æŠ¥æ–‡çš„ç»„æˆéƒ¨åˆ†">è¯·æ±‚æŠ¥æ–‡çš„ç»„æˆéƒ¨åˆ†<a hidden class="anchor" aria-hidden="true" href="#è¯·æ±‚æŠ¥æ–‡çš„ç»„æˆéƒ¨åˆ†">#</a></h3>
<ol>
<li>
<p>è¯·æ±‚è¡Œï¼š è¯·æ±‚æ–¹æ³•ï¼Œ URLï¼Œ åè®®</p>
</li>
<li>
<p>è¯·æ±‚å¤´ï¼š ä»¥é”®å€¼å¯¹çš„æ ¼å¼æºå¸¦çš„é™„åŠ ä¿¡æ¯ <code>Content-Type: application/json</code></p>
</li>
<li>
<p>ç©ºè¡Œï¼š åˆ†éš”è¯·æ±‚å¤´ï¼Œç©ºè¡Œä¹‹åæ˜¯å‘é€ç»™æœåŠ¡å™¨çš„èµ„æº</p>
</li>
<li>
<p>è¯·æ±‚ä½“ï¼š æµè§ˆå™¨å‘é€çš„èµ„æº</p>
</li>
</ol>
<h2 id="5-httpåè®®---å“åº”æŠ¥æ–‡">5. HTTPåè®® - å“åº”æŠ¥æ–‡<a hidden class="anchor" aria-hidden="true" href="#5-httpåè®®---å“åº”æŠ¥æ–‡">#</a></h2>
<ul>
<li>HTTP åè®®ï¼š è§„å®šäº†æµè§ˆå™¨å‘é€åŠæœåŠ¡å™¨è¿”å›å†…å®¹çš„æ ¼å¼</li>
<li>å“åº”æŠ¥æ–‡ï¼š æœåŠ¡å™¨æŒ‰ç…§HTTPåè®®è¦æ±‚çš„æ ¼å¼ï¼Œè¿”å›ç»™æµè§ˆå™¨çš„å†…å®¹</li>
</ul>
<ol>
<li>
<p>å“åº”æŠ¥æ–‡çš„ç»„æˆéƒ¨åˆ†</p>
<ol>
<li>
<p>å“åº”è¡Œï¼ˆçŠ¶æ€è¡Œï¼‰ï¼šåè®®ã€HTTPå“åº”çŠ¶æ€ç ã€çŠ¶æ€ä¿¡æ¯</p>
<table>
<thead>
<tr>
<th>çŠ¶æ€ç </th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td>1xx</td>
<td>ä¿¡æ¯</td>
</tr>
<tr>
<td>2xx</td>
<td>æˆåŠŸ</td>
</tr>
<tr>
<td>3xx</td>
<td>é‡å®šå‘æ¶ˆæ¯</td>
</tr>
<tr>
<td>4xx</td>
<td>å®¢æˆ·ç«¯é”™è¯¯</td>
</tr>
<tr>
<td>5xx</td>
<td>æœåŠ¡ç«¯é”™è¯¯</td>
</tr>
</tbody>
</table>
</li>
<li>
<p>å“åº”å¤´ï¼šä»¥é”®å€¼å¯¹çš„æ ¼å¼æºå¸¦çš„é™„åŠ ä¿¡æ¯ <code>Content-Type:Application/JSON</code></p>
</li>
<li>
<p>ç©ºè¡Œï¼š åˆ†éš”å“åº”å¤´ï¼Œç©ºè¡Œä¹‹åçš„æ˜¯æœåŠ¡å™¨è¿”å›çš„èµ„æº</p>
</li>
<li>
<p>å“åº”ä½“ï¼šè¿”å›çš„èµ„æº</p>
</li>
</ol>
</li>
</ol>
<h2 id="6-æ¥å£æ–‡æ¡£">6. æ¥å£æ–‡æ¡£<a hidden class="anchor" aria-hidden="true" href="#6-æ¥å£æ–‡æ¡£">#</a></h2>
<blockquote>
<p>æè¿°æ¥å£çš„æ–‡ç« </p>
</blockquote>
<p>æ¥å£æ˜¯ä»€ä¹ˆï¼Ÿ</p>
<blockquote>
<p>ä½¿ç”¨AJAXå’ŒæœåŠ¡å™¨é€šè®¯æ—¶ï¼Œä½¿ç”¨çš„URL, è¯·æ±‚æ–¹æ³•ï¼Œä»¥åŠå‚æ•°</p>
</blockquote>
<h2 id="7-form-serialize-æ’ä»¶">7. form-serialize æ’ä»¶<a hidden class="anchor" aria-hidden="true" href="#7-form-serialize-æ’ä»¶">#</a></h2>
<blockquote>
<p>å¿«é€Ÿæ”¶é›†è¡¨å•å…ƒç´ çš„å€¼</p>
</blockquote>
<div class="highlight"><pre tabindex="0" style="color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#286983">const</span> <span style="color:#d7827e">form</span> <span style="color:#797593">=</span> <span style="color:#d7827e">document</span><span style="color:#797593">.</span><span style="color:#d7827e">querySelector</span><span style="color:#797593">(</span><span style="color:#ea9d34">&#39;.example-form&#39;</span><span style="color:#797593">)</span>
</span></span><span style="display:flex;"><span><span style="color:#286983">const</span> <span style="color:#d7827e">data</span> <span style="color:#797593">=</span> <span style="color:#d7827e">serialize</span><span style="color:#797593">(</span><span style="color:#d7827e">form</span><span style="color:#797593">,</span> <span style="color:#797593">{</span><span style="color:#d7827e">hash</span><span style="color:#797593">:</span> <span style="color:#286983">true</span><span style="color:#797593">,</span> <span style="color:#d7827e">empty</span><span style="color:#797593">:</span><span style="color:#286983">true</span><span style="color:#797593">})</span>
</span></span></code></pre></div><p>ä½¿ç”¨è§£è¯»ï¼š</p>
<ul>
<li>
<p>å‚æ•°1ï¼šè¦è·å–å“ªä¸ªè¡¨å•çš„æ•°æ®</p>
<p>è¡¨å•å…ƒç´ è®¾ç½®nameå±æ€§ï¼Œå€¼ä¼šä½œä¸ºå¯¹è±¡çš„å±æ€§åã€‚å»ºè®®nameå±æ€§çš„å€¼ï¼Œæœ€å¥½ä¸æ¥å£æ–‡æ¡£å‚æ•°åä¸€è‡´</p>
</li>
<li>
<p>å‚æ•°2:   é…ç½®å¯¹è±¡</p>
<p>hash è®¾ç½®è·å–æ•°æ®ç»“æ„</p>
<ul>
<li>trueï¼š JS å¯¹è±¡ï¼ˆæ¨èï¼‰ä¸€èˆ¬è¯·æ±‚ä½“æäº¤è‡³æœåŠ¡å™¨çš„æ ¼å¼ã€‚</li>
<li>falseï¼šæŸ¥è¯¢å­—ç¬¦ä¸²</li>
</ul>
<p>empty è®¾ç½®æ˜¯å¦è·å–ç©ºå€¼</p>
<ul>
<li>trueï¼šè·å–ç©ºå€¼ï¼ˆæ¨èï¼‰æ•°æ®ç»“æ„å’Œæ ‡ç­¾ç»“æ„ä¸€è‡´</li>
<li>falseï¼šä¸è·å–ç©ºå€¼</li>
</ul>
</li>
</ul>
<h2 id="8-apiè¦æ±‚è¯·æ±‚ä½“formdata">8. APIè¦æ±‚è¯·æ±‚ä½“FormData()<a hidden class="anchor" aria-hidden="true" href="#8-apiè¦æ±‚è¯·æ±‚ä½“formdata">#</a></h2>
<ul>
<li>æ–‡ä»¶é€‰æ‹©å…ƒç´  -&gt; ä½¿ç”¨changeæ”¹å˜äº‹ä»¶ï¼Œä½¿ç”¨filesè·å–ç›‘å¬äº‹ä»¶çš„æ–‡ä»¶åˆ—è¡¨</li>
<li>ä½¿ç”¨FormData()ä¼ è¾“æ–‡ä»¶</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#d7827e">document</span><span style="color:#797593">.</span><span style="color:#d7827e">querySelector</span><span style="color:#797593">(</span><span style="color:#ea9d34">&#39;.upload&#39;</span><span style="color:#797593">).</span><span style="color:#d7827e">addEventListener</span><span style="color:#797593">(</span><span style="color:#ea9d34">&#39;change&#39;</span><span style="color:#797593">,</span><span style="color:#d7827e">e</span><span style="color:#797593">=&gt;{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#9893a5">//1. è·å–å›¾ç‰‡æ–‡ä»¶,ä½¿ç”¨filesè·å–ç›‘å¬äº‹ä»¶çš„æ–‡ä»¶åˆ—è¡¨
</span></span></span><span style="display:flex;"><span><span style="color:#9893a5"></span>    <span style="color:#d7827e">console</span><span style="color:#797593">.</span><span style="color:#d7827e">log</span><span style="color:#797593">(</span><span style="color:#d7827e">e</span><span style="color:#797593">.</span><span style="color:#d7827e">target</span><span style="color:#797593">.</span><span style="color:#d7827e">files</span><span style="color:#797593">[</span><span style="color:#ea9d34">0</span><span style="color:#797593">])</span>
</span></span><span style="display:flex;"><span>    <span style="color:#286983">const</span> <span style="color:#d7827e">fd</span> <span style="color:#797593">=</span> <span style="color:#286983">new</span> <span style="color:#d7827e">FormData</span><span style="color:#797593">()</span>
</span></span><span style="display:flex;"><span>    <span style="color:#d7827e">fd</span><span style="color:#797593">.</span><span style="color:#d7827e">append</span><span style="color:#797593">(</span><span style="color:#ea9d34">&#39;img&#39;</span><span style="color:#797593">,</span><span style="color:#d7827e">e</span><span style="color:#797593">.</span><span style="color:#d7827e">target</span><span style="color:#797593">.</span><span style="color:#d7827e">files</span><span style="color:#797593">[</span><span style="color:#ea9d34">0</span><span style="color:#797593">])</span>
</span></span><span style="display:flex;"><span>    <span style="color:#d7827e">axios</span><span style="color:#797593">({</span>
</span></span><span style="display:flex;"><span>        <span style="color:#9893a5">// api
</span></span></span><span style="display:flex;"><span><span style="color:#9893a5"></span>        <span style="color:#d7827e">url</span><span style="color:#797593">:</span><span style="color:#ea9d34">&#39;&#39;</span><span style="color:#797593">,</span>
</span></span><span style="display:flex;"><span>        <span style="color:#d7827e">method</span><span style="color:#797593">:</span><span style="color:#ea9d34">&#39;post&#39;</span><span style="color:#797593">,</span>
</span></span><span style="display:flex;"><span>        <span style="color:#d7827e">data</span><span style="color:#797593">:</span><span style="color:#d7827e">fd</span>
</span></span><span style="display:flex;"><span>    <span style="color:#797593">}).</span><span style="color:#d7827e">then</span><span style="color:#797593">(</span><span style="color:#d7827e">result</span><span style="color:#797593">=&gt;{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#d7827e">console</span><span style="color:#797593">.</span><span style="color:#d7827e">log</span><span style="color:#797593">(</span><span style="color:#d7827e">result</span><span style="color:#797593">)</span>
</span></span><span style="display:flex;"><span>        <span style="color:#286983">const</span> <span style="color:#d7827e">imgUrl</span> <span style="color:#797593">=</span> <span style="color:#d7827e">result</span><span style="color:#797593">.</span><span style="color:#d7827e">data</span><span style="color:#797593">.</span><span style="color:#d7827e">data</span><span style="color:#797593">.</span><span style="color:#d7827e">url</span>
</span></span><span style="display:flex;"><span>        <span style="color:#d7827e">document</span><span style="color:#797593">.</span><span style="color:#d7827e">querySelector</span><span style="color:#797593">(</span><span style="color:#ea9d34">&#39;.img&#39;</span><span style="color:#797593">).</span><span style="color:#d7827e">src</span> <span style="color:#797593">=</span> <span style="color:#d7827e">imgUrl</span>
</span></span><span style="display:flex;"><span>    <span style="color:#797593">})</span>
</span></span><span style="display:flex;"><span><span style="color:#797593">}</span>
</span></span></code></pre></div><h1 id="day3">Day3<a hidden class="anchor" aria-hidden="true" href="#day3">#</a></h1>
<h2 id="1-ajax-åŸç†---xmlhttprequest">1. AJAX åŸç† - XMLHttpRequest<a hidden class="anchor" aria-hidden="true" href="#1-ajax-åŸç†---xmlhttprequest">#</a></h2>
<blockquote>
<p>XMLHttpRequest ï¼ˆXHRï¼‰å¯¹è±¡ç”¨äºä¸æœåŠ¡å™¨äº¤äº’ã€‚é€šè¿‡XMLHttpRequest å¯ä»¥åœ¨ä¸åˆ·æ–°é¡µé¢çš„æƒ…å†µä¸‹è¯·æ±‚ç‰¹å®šçš„URLï¼Œè·å–æ•°æ®ã€‚</p>
<p>è¿™å…è®¸ç½‘é¡µåœ¨ä¸å½±å“ç”¨æˆ·æ“ä½œçš„æƒ…å†µä¸‹ï¼Œæ›´æ–°é¡µé¢çš„å±€éƒ¨å†…å®¹ã€‚</p>
<p>XMLHttpRequest åœ¨AJAXç¼–ç¨‹ä¸­è¢«å¤§é‡ä½¿ç”¨</p>
</blockquote>
<p>å…³ç³»ï¼šaxios å†…éƒ¨é‡‡ç”¨ <code>XMLHttpRequest</code>ä¸æœåŠ¡å™¨äº¤äº’</p>
<p><img loading="lazy" src="/img/Javascript/image-20240326133541516.png" alt="image-20240326133541516"  />
</p>
<h3 id="1-ä½¿ç”¨-xmlhttprequest">1. ä½¿ç”¨ XMLHttpRequest<a hidden class="anchor" aria-hidden="true" href="#1-ä½¿ç”¨-xmlhttprequest">#</a></h3>
<p>æ­¥éª¤&amp;è¯­æ³•</p>
<div class="highlight"><pre tabindex="0" style="color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#286983">const</span> <span style="color:#d7827e">xhr</span> <span style="color:#797593">=</span> <span style="color:#286983">new</span> <span style="color:#d7827e">XMLHttpRequest</span><span style="color:#797593">()</span>
</span></span><span style="display:flex;"><span><span style="color:#d7827e">xhr</span><span style="color:#797593">.</span><span style="color:#d7827e">open</span><span style="color:#797593">(</span><span style="color:#ea9d34">&#39;è¯·æ±‚æ–¹æ³•&#39;</span><span style="color:#797593">,</span><span style="color:#ea9d34">&#39;è¯·æ±‚urlç½‘å€&#39;</span><span style="color:#797593">)</span>
</span></span><span style="display:flex;"><span><span style="color:#d7827e">xhr</span><span style="color:#797593">.</span><span style="color:#d7827e">addEventListener</span><span style="color:#797593">(</span><span style="color:#ea9d34">&#39;loadend&#39;</span><span style="color:#797593">,()=&gt;{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#9893a5">// å“åº”ç»“æœ
</span></span></span><span style="display:flex;"><span><span style="color:#9893a5"></span>    <span style="color:#d7827e">console</span><span style="color:#797593">.</span><span style="color:#d7827e">log</span><span style="color:#797593">(</span><span style="color:#d7827e">xhr</span><span style="color:#797593">.</span><span style="color:#d7827e">response</span><span style="color:#797593">)</span>
</span></span><span style="display:flex;"><span>    <span style="color:#9893a5">// æ¥å—æœåŠ¡ç«¯çš„å“åº”
</span></span></span><span style="display:flex;"><span><span style="color:#9893a5"></span><span style="color:#797593">})</span>
</span></span><span style="display:flex;"><span><span style="color:#d7827e">xhr</span><span style="color:#797593">.</span><span style="color:#d7827e">send</span><span style="color:#797593">()</span> <span style="color:#9893a5">// ç»™æœåŠ¡ç«¯å‘é€è¯·æ±‚
</span></span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#9893a5">// å†æ¥ä¸€ä¸ªæ¡ˆä¾‹
</span></span></span><span style="display:flex;"><span><span style="color:#9893a5"></span><span style="color:#286983">const</span> <span style="color:#d7827e">xhr</span> <span style="color:#797593">=</span> <span style="color:#286983">new</span> <span style="color:#d7827e">XMLHttpRequest</span><span style="color:#797593">()</span>
</span></span><span style="display:flex;"><span>    <span style="color:#d7827e">xhr</span><span style="color:#797593">.</span><span style="color:#d7827e">open</span><span style="color:#797593">(</span><span style="color:#ea9d34">&#39;get&#39;</span><span style="color:#797593">,</span> <span style="color:#ea9d34">&#39;http://hmajax.itheima.net/api/province&#39;</span><span style="color:#797593">)</span>
</span></span><span style="display:flex;"><span>    <span style="color:#d7827e">xhr</span><span style="color:#797593">.</span><span style="color:#d7827e">addEventListener</span><span style="color:#797593">(</span><span style="color:#ea9d34">&#39;loadend&#39;</span><span style="color:#797593">,</span> <span style="color:#797593">()</span> <span style="color:#797593">=&gt;</span> <span style="color:#797593">{</span>
</span></span><span style="display:flex;"><span>      <span style="color:#9893a5">// æ— è®ºæˆåŠŸæˆ–å¤±è´¥ï¼Œéƒ½ä¼šè¿”å›æ•°æ®
</span></span></span><span style="display:flex;"><span><span style="color:#9893a5"></span>      <span style="color:#9893a5">// è¿”å›jsonå­—ç¬¦ä¸²ï¼Œ axioså¸®å¿™è½¬æˆäº†jså¯¹è±¡
</span></span></span><span style="display:flex;"><span><span style="color:#9893a5"></span>      <span style="color:#d7827e">console</span><span style="color:#797593">.</span><span style="color:#d7827e">log</span><span style="color:#797593">(</span><span style="color:#d7827e">xhr</span><span style="color:#797593">.</span><span style="color:#d7827e">response</span><span style="color:#797593">)</span>
</span></span><span style="display:flex;"><span>      <span style="color:#9893a5">// è½¬æ¢æˆjså¯¹è±¡
</span></span></span><span style="display:flex;"><span><span style="color:#9893a5"></span>      <span style="color:#286983">const</span> <span style="color:#d7827e">data</span> <span style="color:#797593">=</span> <span style="color:#d7827e">JSON</span><span style="color:#797593">.</span><span style="color:#d7827e">parse</span><span style="color:#797593">(</span><span style="color:#d7827e">xhr</span><span style="color:#797593">.</span><span style="color:#d7827e">response</span><span style="color:#797593">)</span>
</span></span><span style="display:flex;"><span>      <span style="color:#9893a5">// è½¬æ¢æˆå­—ç¬¦ä¸²
</span></span></span><span style="display:flex;"><span><span style="color:#9893a5"></span>      <span style="color:#d7827e">console</span><span style="color:#797593">.</span><span style="color:#d7827e">log</span><span style="color:#797593">(</span><span style="color:#d7827e">data</span><span style="color:#797593">.</span><span style="color:#d7827e">list</span><span style="color:#797593">.</span><span style="color:#d7827e">join</span><span style="color:#797593">(</span><span style="color:#ea9d34">&#39;&lt;br&gt;&#39;</span><span style="color:#797593">))</span>
</span></span><span style="display:flex;"><span>    <span style="color:#797593">})</span>
</span></span><span style="display:flex;"><span>    <span style="color:#9893a5">// å‘èµ·è¯·æ±‚
</span></span></span><span style="display:flex;"><span><span style="color:#9893a5"></span>    <span style="color:#d7827e">xhr</span><span style="color:#797593">.</span><span style="color:#d7827e">send</span><span style="color:#797593">()</span>
</span></span></code></pre></div><p>æ€»ç»“ï¼š</p>
<ol>
<li>
<p>AJAXåŸç†</p>
<p>XMLHttpRequest å¯¹è±¡</p>
</li>
<li>
<p>ä¸ºä»€ä¹ˆå­¦ä¹  XHRï¼Ÿ</p>
<p>äº†è§£axioså†…éƒ¨åŸç†</p>
<p>äº†è§£æœåŠ¡å™¨æ•°æ®é€šä¿¡çš„æ–¹å¼</p>
</li>
<li>
<p>XHRä½¿ç”¨æ­¥éª¤ï¼Ÿ</p>
<p>åˆ›å»ºXHRå¯¹è±¡</p>
<p>è°ƒç”¨openæ–¹æ³•ï¼Œè®¾ç½®urlå’Œè¯·æ±‚æ–¹æ³•</p>
<p>ç›‘å¬loadendäº‹ä»¶ï¼Œæ¥æ”¶ç»“æœ</p>
<p>è°ƒç”¨sendæ–¹æ³•ï¼Œå‘èµ·è¯·æ±‚</p>
</li>
</ol>
<h3 id="2-xmlhttprequest---æŸ¥è¯¢å‚æ•°">2. XMLHttpRequest  -æŸ¥è¯¢å‚æ•°<a hidden class="anchor" aria-hidden="true" href="#2-xmlhttprequest---æŸ¥è¯¢å‚æ•°">#</a></h3>
<p>å®šä¹‰ï¼š æµè§ˆå™¨æä¾›ç»™æœåŠ¡å™¨çš„é¢å¤–ä¿¡æ¯ï¼Œè®©æœåŠ¡å™¨è¿”å›æµè§ˆå™¨æƒ³è¦çš„æ•°æ®</p>
<p>è¯­æ³•ï¼š<code>http://xxxx.com/xxx/xxx?å‚æ•°å1=å€¼1 &amp; å‚æ•°å2=å€¼2</code></p>
<p><img loading="lazy" src="/img/Javascript/image-20240326134942164.png" alt="image-20240326134942164"  />
</p>
<h3 id="3-urlsearchparams">3. URLSearchParams()<a hidden class="anchor" aria-hidden="true" href="#3-urlsearchparams">#</a></h3>
<blockquote>
<p>ç”¨æ¥ç”ŸæˆæŸ¥è¯¢å‚æ•°</p>
</blockquote>
<div class="highlight"><pre tabindex="0" style="color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#286983">const</span> <span style="color:#d7827e">paramsObj</span> <span style="color:#797593">=</span> <span style="color:#286983">new</span> <span style="color:#d7827e">URLSearchParams</span><span style="color:#797593">({</span>
</span></span><span style="display:flex;"><span>    <span style="color:#d7827e">å‚æ•°å1</span><span style="color:#797593">:</span><span style="color:#d7827e">å€¼1</span><span style="color:#797593">,</span>
</span></span><span style="display:flex;"><span>    <span style="color:#d7827e">å‚æ•°å2</span><span style="color:#797593">:</span><span style="color:#d7827e">å€¼2</span>
</span></span><span style="display:flex;"><span><span style="color:#797593">})</span>
</span></span><span style="display:flex;"><span><span style="color:#286983">const</span> <span style="color:#d7827e">queryString</span> <span style="color:#797593">=</span> <span style="color:#d7827e">paramsObj</span><span style="color:#797593">.</span><span style="color:#d7827e">toString</span><span style="color:#797593">()</span>
</span></span></code></pre></div><h3 id="4-xmlhttprequest-æ•°æ®æäº¤">4. XMLHttpRequest() æ•°æ®æäº¤<a hidden class="anchor" aria-hidden="true" href="#4-xmlhttprequest-æ•°æ®æäº¤">#</a></h3>
<p>è¯·æ±‚å¤´è®¾ç½® Content-Typeï¼šapplication/json</p>
<p>è¯·æ±‚ä½“æºå¸¦JSON å­—ç¬¦ä¸²</p>
<p>åœ¨å¼€å‘è€…æ§åˆ¶å°çš„ ç½‘ç»œ-&gt; Fetch/XHR-&gt;é€‰æ‹©è°ƒç”¨çš„æ¥å£</p>
<div class="highlight"><pre tabindex="0" style="color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#286983">const</span> <span style="color:#d7827e">xhr</span> <span style="color:#797593">=</span> <span style="color:#286983">new</span> <span style="color:#d7827e">XML</span> <span style="color:#d7827e">HttpRequest</span><span style="color:#797593">()</span>
</span></span><span style="display:flex;"><span><span style="color:#d7827e">xhr</span><span style="color:#797593">.</span><span style="color:#d7827e">open</span><span style="color:#797593">(</span><span style="color:#ea9d34">&#39;è¯·æ±‚æ–¹æ³•&#39;</span><span style="color:#b4637a">ï¼Œ</span><span style="color:#ea9d34">&#39;è¯·æ±‚urlç½‘å€&#39;</span><span style="color:#797593">)</span>
</span></span><span style="display:flex;"><span><span style="color:#d7827e">xhr</span><span style="color:#797593">.</span><span style="color:#d7827e">addEventListener</span><span style="color:#797593">(</span><span style="color:#ea9d34">&#39;loadend&#39;</span><span style="color:#797593">,()=&gt;(</span>
</span></span><span style="display:flex;"><span>    <span style="color:#d7827e">console</span><span style="color:#797593">.</span><span style="color:#d7827e">log</span><span style="color:#797593">(</span><span style="color:#d7827e">xhr</span><span style="color:#797593">.</span><span style="color:#d7827e">response</span><span style="color:#797593">)</span>
</span></span><span style="display:flex;"><span><span style="color:#797593">))</span>
</span></span><span style="display:flex;"><span><span style="color:#9893a5">// æäº¤æ—¶ï¼Œè®¾ç½®è¯·æ±‚å¤´
</span></span></span><span style="display:flex;"><span><span style="color:#9893a5"></span><span style="color:#d7827e">xhr</span><span style="color:#797593">.</span><span style="color:#d7827e">setRequestHeader</span><span style="color:#797593">(</span><span style="color:#ea9d34">&#39;content-type&#39;</span><span style="color:#797593">,</span><span style="color:#ea9d34">&#39;application/json&#39;</span><span style="color:#797593">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#286983">const</span> <span style="color:#d7827e">user</span> <span style="color:#797593">=</span> <span style="color:#797593">{</span><span style="color:#d7827e">username</span><span style="color:#797593">:</span><span style="color:#ea9d34">&#39;itheima007&#39;</span><span style="color:#797593">,</span><span style="color:#d7827e">password</span><span style="color:#797593">:</span><span style="color:#ea9d34">&#39;7654321&#39;</span><span style="color:#797593">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#9893a5">// è½¬æ¢æˆjson
</span></span></span><span style="display:flex;"><span><span style="color:#9893a5"></span><span style="color:#286983">const</span> <span style="color:#d7827e">userJson</span> <span style="color:#797593">=</span> <span style="color:#d7827e">JSON</span><span style="color:#797593">.</span><span style="color:#d7827e">stringify</span><span style="color:#797593">(</span><span style="color:#d7827e">user</span><span style="color:#797593">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#d7827e">xhr</span><span style="color:#797593">.</span><span style="color:#d7827e">send</span><span style="color:#797593">(</span><span style="color:#d7827e">userJson</span><span style="color:#797593">)</span>
</span></span></code></pre></div><h2 id="2-promiseå¯¹è±¡">2. Promiseå¯¹è±¡<a hidden class="anchor" aria-hidden="true" href="#2-promiseå¯¹è±¡">#</a></h2>
<blockquote>
<p>å®šä¹‰ï¼š Promise å¯¹è±¡ç”¨äºè¡¨ç¤ºä¸€ä¸ªå¼‚æ­¥æ“ä½œçš„æœ€ç»ˆå®Œæˆï¼ˆæˆ–å¤±è´¥ï¼‰åŠå…¶ç»“æœå€¼</p>
<p>ç›®å‰å­¦è¿‡çš„å¼‚æ­¥ï¼šAJAX, setTimeout(), setTimeInterval()</p>
</blockquote>
<h3 id="1-äº†è§£">1. äº†è§£<a hidden class="anchor" aria-hidden="true" href="#1-äº†è§£">#</a></h3>
<p>ä¼˜åŠ¿ï¼š</p>
<ol>
<li>é€»è¾‘æ›´æ¸…æ™°</li>
<li>äº†è§£axios å‡½æ•°å†…éƒ¨è¿ä½œæœºåˆ¶</li>
<li>èƒ½è§£å†³å›è°ƒå‡½æ•°åœ°ç‹±é—®é¢˜</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span>    <span style="color:#9893a5">// åˆ›å»ºPromiseå¯¹è±¡
</span></span></span><span style="display:flex;"><span><span style="color:#9893a5"></span><span style="color:#286983">const</span> <span style="color:#d7827e">p</span> <span style="color:#797593">=</span> <span style="color:#286983">new</span> <span style="color:#d7827e">Promise</span><span style="color:#797593">((</span><span style="color:#d7827e">resolve</span><span style="color:#797593">,</span> <span style="color:#d7827e">reject</span><span style="color:#797593">)=&gt;{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#9893a5">// æ‰§è¡Œä¸€æ­¥ä»»åŠ¡å¹¶ä¼ é€’ç»“æœ
</span></span></span><span style="display:flex;"><span><span style="color:#9893a5"></span>    <span style="color:#9893a5">// æˆåŠŸè°ƒç”¨ï¼š resolve(å€¼)è§¦å‘ then()æ‰§è¡Œ
</span></span></span><span style="display:flex;"><span><span style="color:#9893a5"></span>    <span style="color:#9893a5">// å¤±è´¥è°ƒç”¨ï¼š reject(å€¼)è§¦å‘ catch()æ‰§è¡Œ
</span></span></span><span style="display:flex;"><span><span style="color:#9893a5"></span><span style="color:#797593">})</span>
</span></span><span style="display:flex;"><span><span style="color:#d7827e">p</span><span style="color:#797593">.</span><span style="color:#d7827e">then</span><span style="color:#797593">(</span><span style="color:#d7827e">result</span><span style="color:#797593">=&gt;{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#9893a5">// æˆåŠŸ
</span></span></span><span style="display:flex;"><span><span style="color:#9893a5"></span><span style="color:#797593">}).</span><span style="color:#286983">catch</span><span style="color:#797593">(</span><span style="color:#d7827e">error</span><span style="color:#797593">=&gt;{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#9893a5">// å¤±è´¥
</span></span></span><span style="display:flex;"><span><span style="color:#9893a5"></span><span style="color:#797593">})</span>
</span></span></code></pre></div><p><img loading="lazy" src="/img/Javascript/image-20240327145303599.png" alt="image-20240327145303599"  />
</p>
<p>æ€»ç»“ï¼š</p>
<ol>
<li>
<p>ä»€ä¹ˆæ˜¯Promise? ç®¡ç†ä¸€ä¸ªå¼‚æ­¥æ“ä½œæœ€ç»ˆçŠ¶æ€å’Œç»“æœçš„å€¼çš„å¯¹è±¡</p>
</li>
<li>
<p>ä¸ºä»€ä¹ˆå­¦ä¹ Promiseï¼Ÿ</p>
<p>æˆåŠŸå’Œå¤±è´¥çŠ¶æ€ï¼Œå¯ä»¥å…³è”å¯¹åº”å¤„ç†ç¨‹åº</p>
<p>äº†è§£axioså†…éƒ¨åŸç†</p>
</li>
<li>
<p>Promiseä½¿ç”¨æ­¥éª¤</p>
<ol>
<li>åˆ›å»ºå¯¹è±¡</li>
<li>å®šä¹‰ä¸¤ä¸ªå½¢å‚å¹¶æ‰§è¡Œå›è°ƒå‡½æ•°ï¼Œæ‰§è¡Œå¼‚æ­¥ä»£ç </li>
<li>æˆåŠŸå’Œå¤±è´¥æ‰§è¡Œä¸åŒçš„å‡½æ•°</li>
<li>åœ¨.then() .catch()æ–¹æ³•ä¸­æ•æ‰æˆåŠŸæˆ–å¤±è´¥çš„ç»“æœ</li>
</ol>
</li>
</ol>
<h3 id="2-promise-ä¸‰ç§çŠ¶æ€">2. Promise ä¸‰ç§çŠ¶æ€<a hidden class="anchor" aria-hidden="true" href="#2-promise-ä¸‰ç§çŠ¶æ€">#</a></h3>
<p>ä½œç”¨ï¼š äº†è§£Promiseå¯¹è±¡å¦‚ä½•å…³è”å’Œå¤„ç†å‡½æ•°ï¼Œä»¥åŠä»£ç æ‰§è¡Œé¡ºåº</p>
<p>æ¦‚å¿µï¼š ä¸€ä¸ªPromiseå¯¹è±¡ï¼Œå¿…ç„¶å¤„äºä»¥ä¸‹å‡ ç§çŠ¶æ€ä¹‹ä¸€</p>
<ul>
<li>å¾…å®š (pending)ï¼š åˆå§‹çŠ¶æ€ï¼Œå³æ²¡æœ‰è¢«å…‘ç°ï¼Œä¹Ÿæ²¡æœ‰è¢«æ‹’ç»</li>
<li>å·²å…‘ç° (fulfilled)ï¼š æ“ä½œæˆåŠŸå®Œæˆ</li>
<li>å·²æ‹’ç» (rejected)ï¼šæ“ä½œå¤±è´¥</li>
</ul>
<p><strong>æ³¨æ„ï¼š</strong> Promise å¯¹è±¡ä¸€æ—¦è¢«å…‘ç°/æ‹’ç»ï¼Œæ­¤çŠ¶æ€æ— æ³•è¢«æ”¹å˜</p>
<p><img loading="lazy" src="/img/Javascript/image-20240327150915921.png" alt="image-20240327150915921"  />
</p>
<div class="highlight"><pre tabindex="0" style="color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#9893a5">// 1. åˆ›å»ºPromiseå¯¹è±¡ ï¼ˆpending - å¾…å®šçŠ¶æ€ï¼‰
</span></span></span><span style="display:flex;"><span><span style="color:#9893a5"></span><span style="color:#286983">const</span> <span style="color:#d7827e">p</span> <span style="color:#797593">=</span> <span style="color:#286983">new</span> <span style="color:#d7827e">Promise</span><span style="color:#797593">((</span><span style="color:#d7827e">resolve</span><span style="color:#797593">,</span> <span style="color:#d7827e">reject</span><span style="color:#797593">)</span> <span style="color:#797593">=&gt;</span> <span style="color:#797593">{</span>
</span></span><span style="display:flex;"><span>      <span style="color:#d7827e">console</span><span style="color:#797593">.</span><span style="color:#d7827e">log</span><span style="color:#797593">(</span><span style="color:#ea9d34">&#39;Promiseå¯¹è±¡å†…å¼€å§‹æ‰§è¡Œ&#39;</span><span style="color:#797593">)</span>
</span></span><span style="display:flex;"><span>    <span style="color:#9893a5">// Promiseå¯¹è±¡è¢«åˆ›å»ºæ—¶ï¼Œä»£ç ç«‹åˆ»æ‰§è¡Œ
</span></span></span><span style="display:flex;"><span><span style="color:#9893a5"></span>    <span style="color:#9893a5">// 2. æ‰§è¡Œå¼‚æ­¥ä»£ç 
</span></span></span><span style="display:flex;"><span><span style="color:#9893a5"></span>      <span style="color:#d7827e">setTimeout</span><span style="color:#797593">(()</span> <span style="color:#797593">=&gt;</span> <span style="color:#797593">{</span>
</span></span><span style="display:flex;"><span>         <span style="color:#9893a5">// å½“resolve()=&gt;è¢«è°ƒç”¨æ—¶ï¼ŒPromiseçš„çŠ¶æ€ä¼šæ›´æ”¹ä¸ºâ€˜fulfilled å·²å…‘ç°â€™ 
</span></span></span><span style="display:flex;"><span><span style="color:#9893a5"></span>         <span style="color:#9893a5">// å¯¼è‡´then()ä¸­çš„å›è°ƒå‡½æ•°æ‰§è¡Œ
</span></span></span><span style="display:flex;"><span><span style="color:#9893a5"></span>        <span style="color:#d7827e">resolve</span><span style="color:#797593">(</span><span style="color:#ea9d34">&#39;æ¨¡æ‹Ÿajaxè¯·æ±‚æˆåŠŸ&#39;</span><span style="color:#797593">)</span>
</span></span><span style="display:flex;"><span>         <span style="color:#9893a5">// å½“reject()=&gt;è¢«è°ƒç”¨æ—¶ï¼ŒPromiseçš„çŠ¶æ€ä¼šæ›´æ”¹ä¸ºâ€˜rejected å·²æ‹’ç»â€™ 
</span></span></span><span style="display:flex;"><span><span style="color:#9893a5"></span>         <span style="color:#9893a5">// å¯¼è‡´catch()ä¸­çš„å›è°ƒå‡½æ•°æ‰§è¡Œ
</span></span></span><span style="display:flex;"><span><span style="color:#9893a5"></span>        <span style="color:#9893a5">// reject(new Error(&#39;å¤±è´¥ï¼&#39;))
</span></span></span><span style="display:flex;"><span><span style="color:#9893a5"></span>
</span></span><span style="display:flex;"><span>      <span style="color:#797593">},</span> <span style="color:#ea9d34">2000</span><span style="color:#797593">)</span>
</span></span><span style="display:flex;"><span>    <span style="color:#797593">})</span>
</span></span><span style="display:flex;"><span>    <span style="color:#d7827e">p</span><span style="color:#797593">.</span><span style="color:#d7827e">then</span><span style="color:#797593">(</span><span style="color:#d7827e">result</span> <span style="color:#797593">=&gt;</span> <span style="color:#797593">{</span>
</span></span><span style="display:flex;"><span>      <span style="color:#d7827e">console</span><span style="color:#797593">.</span><span style="color:#d7827e">log</span><span style="color:#797593">(</span><span style="color:#d7827e">result</span><span style="color:#797593">);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#797593">}).</span><span style="color:#286983">catch</span><span style="color:#797593">(</span><span style="color:#d7827e">error</span> <span style="color:#797593">=&gt;</span> <span style="color:#797593">{</span>
</span></span><span style="display:flex;"><span>      <span style="color:#d7827e">console</span><span style="color:#797593">.</span><span style="color:#d7827e">log</span><span style="color:#797593">(</span><span style="color:#d7827e">error</span><span style="color:#797593">)</span>
</span></span><span style="display:flex;"><span>    <span style="color:#797593">})</span>
</span></span></code></pre></div><p>æ€»ç»“ï¼š</p>
<ol>
<li>
<p>Promise å¯¹è±¡æœ‰å“ªä¸‰ç§çŠ¶æ€ï¼Ÿ</p>
<p>å¾…å®š pending</p>
<p>å·²å…‘ç° fulfilled</p>
<p>å·²æ‹’ç» rejected</p>
</li>
<li>
<p>Promise çŠ¶æ€æœ‰ä»€ä¹ˆç”¨ï¼Ÿ</p>
<p>çŠ¶æ€æ”¹å˜åï¼Œè°ƒç”¨å…³è”çš„å¤„ç†å‡½æ•°</p>
</li>
</ol>
<p>æ¡ˆä¾‹ï¼š Promise å’Œ XMLHttpRequest çš„ç»“åˆ</p>
<div class="highlight"><pre tabindex="0" style="color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#286983">const</span> <span style="color:#d7827e">p</span> <span style="color:#797593">=</span> <span style="color:#286983">new</span> <span style="color:#d7827e">Promise</span><span style="color:#797593">((</span><span style="color:#d7827e">resolve</span><span style="color:#797593">,</span> <span style="color:#d7827e">reject</span><span style="color:#797593">)</span> <span style="color:#797593">=&gt;</span> <span style="color:#797593">{</span>
</span></span><span style="display:flex;"><span>      <span style="color:#286983">const</span> <span style="color:#d7827e">xhr</span> <span style="color:#797593">=</span> <span style="color:#286983">new</span> <span style="color:#d7827e">XMLHttpRequest</span><span style="color:#797593">()</span>
</span></span><span style="display:flex;"><span>      <span style="color:#d7827e">xhr</span><span style="color:#797593">.</span><span style="color:#d7827e">open</span><span style="color:#797593">(</span><span style="color:#ea9d34">&#39;GET&#39;</span><span style="color:#797593">,</span> <span style="color:#ea9d34">&#39;http://hmajax.itheima.net/api/provincedhdhdh&#39;</span><span style="color:#797593">)</span>
</span></span><span style="display:flex;"><span>      <span style="color:#d7827e">xhr</span><span style="color:#797593">.</span><span style="color:#d7827e">addEventListener</span><span style="color:#797593">(</span><span style="color:#ea9d34">&#39;loadend&#39;</span><span style="color:#797593">,</span> <span style="color:#797593">()</span> <span style="color:#797593">=&gt;</span> <span style="color:#797593">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#9893a5">// xhrä½¿ç”¨å“åº”ç åˆ¤æ–­ å“åº”æˆåŠŸè¿˜æ˜¯å¤±è´¥ 2xxå¼€å¤´éƒ½æ˜¯æˆåŠŸ 4xxéƒ½æ˜¯é”™
</span></span></span><span style="display:flex;"><span><span style="color:#9893a5"></span>        <span style="color:#9893a5">// å“åº”ç 
</span></span></span><span style="display:flex;"><span><span style="color:#9893a5"></span>        <span style="color:#d7827e">console</span><span style="color:#797593">.</span><span style="color:#d7827e">log</span><span style="color:#797593">(</span><span style="color:#d7827e">xhr</span><span style="color:#797593">.</span><span style="color:#d7827e">status</span><span style="color:#797593">)</span>
</span></span><span style="display:flex;"><span>        <span style="color:#d7827e">console</span><span style="color:#797593">.</span><span style="color:#d7827e">log</span><span style="color:#797593">(</span><span style="color:#d7827e">xhr</span><span style="color:#797593">.</span><span style="color:#d7827e">response</span><span style="color:#797593">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#286983">if</span> <span style="color:#797593">(</span><span style="color:#d7827e">xhr</span><span style="color:#797593">.</span><span style="color:#d7827e">status</span> <span style="color:#797593">&gt;=</span> <span style="color:#ea9d34">200</span> <span style="color:#797593">&amp;&amp;</span> <span style="color:#d7827e">xhr</span><span style="color:#797593">.</span><span style="color:#d7827e">status</span> <span style="color:#797593">&lt;</span> <span style="color:#ea9d34">300</span><span style="color:#797593">)</span> <span style="color:#797593">{</span>
</span></span><span style="display:flex;"><span>          <span style="color:#d7827e">resolve</span><span style="color:#797593">(</span><span style="color:#d7827e">JSON</span><span style="color:#797593">.</span><span style="color:#d7827e">parse</span><span style="color:#797593">(</span><span style="color:#d7827e">xhr</span><span style="color:#797593">.</span><span style="color:#d7827e">response</span><span style="color:#797593">))</span>
</span></span><span style="display:flex;"><span>        <span style="color:#797593">}</span> <span style="color:#286983">else</span> <span style="color:#797593">{</span>
</span></span><span style="display:flex;"><span>          <span style="color:#d7827e">reject</span><span style="color:#797593">(</span><span style="color:#286983">new</span> <span style="color:#d7827e">Error</span><span style="color:#797593">(</span><span style="color:#d7827e">xhr</span><span style="color:#797593">.</span><span style="color:#d7827e">response</span><span style="color:#797593">))</span>
</span></span><span style="display:flex;"><span>        <span style="color:#797593">}</span>
</span></span><span style="display:flex;"><span>      <span style="color:#797593">})</span>
</span></span><span style="display:flex;"><span>      <span style="color:#d7827e">xhr</span><span style="color:#797593">.</span><span style="color:#d7827e">send</span><span style="color:#797593">()</span>
</span></span><span style="display:flex;"><span>    <span style="color:#797593">})</span>
</span></span><span style="display:flex;"><span>    <span style="color:#d7827e">p</span><span style="color:#797593">.</span><span style="color:#d7827e">then</span><span style="color:#797593">(</span><span style="color:#d7827e">result</span> <span style="color:#797593">=&gt;</span> <span style="color:#797593">{</span>
</span></span><span style="display:flex;"><span>      <span style="color:#d7827e">document</span><span style="color:#797593">.</span><span style="color:#d7827e">querySelector</span><span style="color:#797593">(</span><span style="color:#ea9d34">&#39;.my-p&#39;</span><span style="color:#797593">).</span><span style="color:#d7827e">innerHTML</span> <span style="color:#797593">=</span>
</span></span><span style="display:flex;"><span>        <span style="color:#d7827e">result</span><span style="color:#797593">.</span><span style="color:#d7827e">list</span><span style="color:#797593">.</span><span style="color:#d7827e">join</span><span style="color:#797593">(</span><span style="color:#ea9d34">&#39;&lt;br&gt;&#39;</span><span style="color:#797593">)</span>
</span></span><span style="display:flex;"><span>    <span style="color:#797593">}).</span><span style="color:#286983">catch</span><span style="color:#797593">(</span><span style="color:#d7827e">error</span> <span style="color:#797593">=&gt;</span> <span style="color:#797593">{</span>
</span></span><span style="display:flex;"><span>      <span style="color:#9893a5">// é”™è¯¯å¯¹è±¡è¦ç”¨console.dirè¯¦ç»†æ‰“å°
</span></span></span><span style="display:flex;"><span><span style="color:#9893a5"></span>      <span style="color:#d7827e">console</span><span style="color:#797593">.</span><span style="color:#d7827e">dir</span><span style="color:#797593">(</span><span style="color:#d7827e">error</span><span style="color:#797593">)</span>
</span></span><span style="display:flex;"><span>      <span style="color:#d7827e">console</span><span style="color:#797593">.</span><span style="color:#d7827e">log</span><span style="color:#797593">(</span><span style="color:#d7827e">error</span><span style="color:#797593">)</span>
</span></span><span style="display:flex;"><span>      <span style="color:#d7827e">document</span><span style="color:#797593">.</span><span style="color:#d7827e">querySelector</span><span style="color:#797593">(</span><span style="color:#ea9d34">&#39;.my-p&#39;</span><span style="color:#797593">).</span><span style="color:#d7827e">innerHTML</span> <span style="color:#797593">=</span> <span style="color:#d7827e">error</span><span style="color:#797593">.</span><span style="color:#d7827e">message</span>
</span></span><span style="display:flex;"><span>    <span style="color:#797593">})</span>
</span></span></code></pre></div><h1 id="day4">Day4<a hidden class="anchor" aria-hidden="true" href="#day4">#</a></h1>
<h2 id="1-åŒæ­¥ä»£ç å¼‚æ­¥ä»£ç ">1. åŒæ­¥ä»£ç &amp;å¼‚æ­¥ä»£ç <a hidden class="anchor" aria-hidden="true" href="#1-åŒæ­¥ä»£ç å¼‚æ­¥ä»£ç ">#</a></h2>
<p>åŒæ­¥ä»£ç </p>
<blockquote>
<p>å®é™…ä¸Šæµè§ˆå™¨æŒ‰ç…§æˆ‘ä»¬ä¹¦å†™ä»£ç çš„é¡ºåºä¸€è¡Œä¸€è¡Œåœ°æ‰§è¡Œç¨‹åºã€‚æµè§ˆå™¨ä¼šç­‰å¾…ä»£ç çš„è§£æå’Œå·¥ä½œï¼Œåœ¨ä¸Šä¸€è¡Œå®Œæˆåæ‰ä¼šæ‰§è¡Œä¸‹ä¸€è¡Œã€‚è¿™æ ·å°±å¾ˆæœ‰å¿…è¦ï¼Œå› ä¸ºæ¯ä¸€è¡Œæ–°çš„ä»£ç éƒ½æ˜¯å»ºç«‹åœ¨å‰é¢çš„ä»£ç çš„åŸºç¡€ä¹‹ä¸Šçš„ã€‚</p>
<p>è¿™ä¹Ÿä½¿å¾—å®ƒæˆä¸ºä¸€ä¸ªåŒæ­¥ç¨‹åº</p>
</blockquote>
<p>å¼‚æ­¥ä»£ç </p>
<blockquote>
<p>å¼‚æ­¥ç¼–ç¨‹æŠ€æœ¯ä½¿ä½ çš„ç¨‹åºå¯ä»¥æ‰§è¡Œä¸€ä¸ªå¯èƒ½é•¿æœŸè¿è¡Œçš„ä»»åŠ¡åŒæ—¶ç»§ç»­å¯¹å…¶ä»–äº‹ä»¶åšå‡ºååº”è€Œä¸å¿…ç­‰å¾…ä»»åŠ¡å®Œæˆã€‚ä¸æ­¤åŒæ—¶ï¼Œä½ çš„ç¨‹åºä¹Ÿå°†åœ¨ä»»åŠ¡å®Œæˆåæ˜¾ç¤ºç»“æœ</p>
</blockquote>
<p>æ€»ç»“ï¼š</p>
<ul>
<li>åŒæ­¥ä»£ç ï¼šé€è¡Œæ‰§è¡Œï¼Œéœ€è¦åœ¨åŸåœ°ç­‰å¾…ç»“æœï¼Œæ‰èƒ½ç»§ç»­å‘ä¸‹æ‰§è¡Œ</li>
<li>å¼‚æ­¥ä»£ç ï¼šè°ƒç”¨åè€—æ—¶ï¼Œä¸é˜»å¡ä»£ç ç»§ç»­æ‰§è¡Œï¼ˆä¸å¿…åŸåœ°ç­‰å¾…ï¼‰ï¼Œåœ¨å°†æ¥å®Œæˆåè§¦å‘ä¸€ä¸ªå›è°ƒå‡½æ•°ã€‚å¼‚æ­¥ä»£ç æ¥æ”¶ç»“æœï¼Œä½¿ç”¨å›è°ƒå‡½æ•°</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#9893a5">// æ•°å­—æ‰“å°é¡ºåº
</span></span></span><span style="display:flex;"><span><span style="color:#9893a5"></span><span style="color:#286983">const</span> <span style="color:#d7827e">result</span> <span style="color:#797593">=</span> <span style="color:#ea9d34">0</span><span style="color:#797593">+</span><span style="color:#ea9d34">1</span>
</span></span><span style="display:flex;"><span><span style="color:#d7827e">console</span><span style="color:#797593">.</span><span style="color:#d7827e">log</span><span style="color:#797593">(</span><span style="color:#d7827e">result</span><span style="color:#797593">)</span> <span style="color:#9893a5">//1
</span></span></span><span style="display:flex;"><span><span style="color:#9893a5"></span><span style="color:#d7827e">setTimeout</span><span style="color:#797593">(()=&gt;{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#d7827e">console</span><span style="color:#797593">.</span><span style="color:#d7827e">log</span><span style="color:#797593">(</span><span style="color:#ea9d34">2</span><span style="color:#797593">)</span>
</span></span><span style="display:flex;"><span><span style="color:#797593">},</span><span style="color:#ea9d34">2000</span><span style="color:#797593">)</span> <span style="color:#9893a5">//2 
</span></span></span><span style="display:flex;"><span><span style="color:#9893a5"></span>
</span></span><span style="display:flex;"><span><span style="color:#9893a5">// äº‹ä»¶ç›¸å…³çš„ä»£ç éƒ½æ˜¯å¼‚æ­¥ï¼Œå› ä¸ºä¸ä¼šé˜»å¡ä»£ç æ‰§è¡Œ
</span></span></span><span style="display:flex;"><span><span style="color:#9893a5"></span><span style="color:#d7827e">document</span><span style="color:#797593">.</span><span style="color:#d7827e">querySelector</span><span style="color:#797593">(</span><span style="color:#ea9d34">&#39;.btn&#39;</span><span style="color:#797593">).</span><span style="color:#d7827e">addEventListener</span><span style="color:#797593">(</span><span style="color:#ea9d34">&#39;click&#39;</span><span style="color:#797593">,()=&gt;{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#d7827e">console</span><span style="color:#797593">.</span><span style="color:#d7827e">log</span><span style="color:#797593">(</span><span style="color:#ea9d34">3</span><span style="color:#797593">)</span>
</span></span><span style="display:flex;"><span><span style="color:#797593">})</span>
</span></span><span style="display:flex;"><span><span style="color:#d7827e">document</span><span style="color:#797593">.</span><span style="color:#d7827e">body</span><span style="color:#797593">.</span><span style="color:#d7827e">style</span><span style="color:#797593">.</span><span style="color:#d7827e">backgroundColor</span> <span style="color:#797593">=</span> <span style="color:#ea9d34">&#39;pink&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#d7827e">console</span><span style="color:#797593">.</span><span style="color:#d7827e">log</span><span style="color:#797593">(</span><span style="color:#ea9d34">4</span><span style="color:#797593">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#9893a5">// æ‰“å°é¡ºåºåº”è¯¥æ˜¯ 1 4 2 
</span></span></span></code></pre></div><p>æ€»ç»“ï¼š</p>
<ol>
<li>
<p>ä»€ä¹ˆæ˜¯åŒæ­¥ä»£ç ï¼Ÿ é€è¡Œæ‰§è¡Œï¼ŒåŸåœ°ç­‰å¾…ç»“æœï¼Œæ‰ç»§ç»­å‘ä¸‹æ‰§è¡Œå…¶ä»–çš„ä»£ç </p>
</li>
<li>
<p>ä»€ä¹ˆæ˜¯å¼‚æ­¥ä»£ç ï¼Ÿè°ƒç”¨åè€—æ—¶ï¼Œä¸é˜»å¡ä»£ç æ‰§è¡Œï¼Œå°†æ¥å®Œæˆåè§¦å‘å›è°ƒå‡½æ•°</p>
</li>
<li>
<p>JS ä¸­æœ‰å“ªäº›å¼‚æ­¥ä»£ç  ?</p>
<p>setTimeout/setInterval</p>
<p>äº‹ä»¶</p>
<p>AJAX</p>
</li>
<li>
<p>å¼‚æ­¥ä»£ç å¦‚ä½•æ¥æ”¶ç»“æœï¼Ÿä¾é å›è°ƒå‡½æ•°æ¥æ¥æ”¶</p>
</li>
</ol>
<h2 id="2-å›è°ƒå‡½æ•°åœ°ç‹±">2. å›è°ƒå‡½æ•°åœ°ç‹±<a hidden class="anchor" aria-hidden="true" href="#2-å›è°ƒå‡½æ•°åœ°ç‹±">#</a></h2>
<blockquote>
<p>åœ¨å›è°ƒå‡½æ•°ä¸­ åµŒå¥—å›è°ƒå‡½æ•°ï¼Œä¸€ç›´åµŒå¥—ä¸‹å»å°±å½¢æˆäº†å›è°ƒå‡½æ•°åœ°ç‹±</p>
</blockquote>
<p>ç¼ºç‚¹ï¼š å¯è¯»æ€§å·®ï¼Œå¼‚å¸¸æ— æ³•æ•è·ï¼Œè€¦åˆæ€§ä¸¥é‡ï¼Œç‰µä¸€å‘åŠ¨å…¨èº«</p>
<h2 id="3-promise---é“¾å¼è°ƒç”¨">3. Promise - é“¾å¼è°ƒç”¨<a hidden class="anchor" aria-hidden="true" href="#3-promise---é“¾å¼è°ƒç”¨">#</a></h2>
<p>æ¦‚å¿µï¼š ä¾é  <code>then()</code>æ–¹æ³•ä¼šè¿”å›ä¸€ä¸ªæ–°ç”Ÿæˆçš„ <code>Promise</code>å¯¹è±¡ç‰¹æ€§ï¼Œç»§ç»­ä¸²è”ä¸‹ä¸€ç¯ä»»åŠ¡ï¼Œç›´åˆ°ç»“æŸ</p>
<p>ç»†èŠ‚ï¼š<code>then()</code>å›è°ƒå‡½æ•°ä¸­çš„è¿”å›å€¼ï¼Œä¼šå½±å“æ–°ç”Ÿæˆ<code>Promise</code>å¯¹è±¡æœ€ç»ˆçŠ¶æ€å’Œç»“æœ</p>
<p>å¥½å¤„ï¼š é€šè¿‡é“¾å¼è°ƒç”¨ï¼Œè§£å†³å›è°ƒå‡½æ•°åµŒå¥—é—®é¢˜</p>
<p><img loading="lazy" src="/img/Javascript/image-20240327234206178.png" alt="image-20240327234206178"  />
</p>
<p><code>setTimeout</code> è¢«ç”¨æ¥æ¨¡æ‹Ÿä¸€ä¸ªè€—æ—¶ 2 ç§’çš„å¼‚æ­¥æ“ä½œã€‚å½“è¿™ä¸ªå¼‚æ­¥æ“ä½œå®Œæˆåï¼ˆå³ 2 ç§’åï¼‰ï¼Œ<code>resolve</code> è¢«è°ƒç”¨ï¼Œå¹¶ä¼ é€’äº†å­—ç¬¦ä¸² <code>'ä¸Šæµ·å¸‚'</code> ä½œä¸ºå‚æ•°ã€‚è¿™ä¼šå¯¼è‡´ <code>Promise</code> å¯¹è±¡ <code>p</code> çš„çŠ¶æ€å˜ä¸º <code>fulfilled</code>ï¼Œå¹¶ä¸” <code>'ä¸Šæµ·å¸‚'</code> è¿™ä¸ªå€¼ä¼šè¢«ä¼ é€’ç»™ <code>p.then</code> ä¸­æ³¨å†Œçš„å›è°ƒå‡½æ•°ï¼Œå¹¶è¢«æ‰“å°å‡ºæ¥ã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span> <span style="color:#9893a5">/**
</span></span></span><span style="display:flex;"><span><span style="color:#9893a5">     * ç›®æ ‡ï¼šæŒæ¡Promiseçš„é“¾å¼è°ƒç”¨
</span></span></span><span style="display:flex;"><span><span style="color:#9893a5">     * éœ€æ±‚ï¼šæŠŠçœå¸‚çš„åµŒå¥—ç»“æ„ï¼Œæ”¹æˆé“¾å¼è°ƒç”¨çš„çº¿æ€§ç»“æ„
</span></span></span><span style="display:flex;"><span><span style="color:#9893a5">    */</span>
</span></span><span style="display:flex;"><span>    <span style="color:#9893a5">// 1. åˆ›å»ºPromiseå¯¹è±¡
</span></span></span><span style="display:flex;"><span><span style="color:#9893a5"></span>    <span style="color:#286983">const</span> <span style="color:#d7827e">p</span> <span style="color:#797593">=</span> <span style="color:#286983">new</span> <span style="color:#d7827e">Promise</span><span style="color:#797593">((</span><span style="color:#d7827e">resolve</span><span style="color:#797593">,</span> <span style="color:#d7827e">reject</span><span style="color:#797593">)</span> <span style="color:#797593">=&gt;</span> <span style="color:#797593">{</span>
</span></span><span style="display:flex;"><span>      <span style="color:#d7827e">setTimeout</span><span style="color:#797593">(()</span> <span style="color:#797593">=&gt;</span> <span style="color:#797593">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#d7827e">resolve</span><span style="color:#797593">(</span><span style="color:#ea9d34">&#39;ä¸Šæµ·å¸‚&#39;</span><span style="color:#797593">)</span>
</span></span><span style="display:flex;"><span>      <span style="color:#797593">},</span> <span style="color:#ea9d34">2000</span><span style="color:#797593">)</span>
</span></span><span style="display:flex;"><span>    <span style="color:#797593">})</span>
</span></span><span style="display:flex;"><span>    <span style="color:#9893a5">// è·å–çœä»½åç§°
</span></span></span><span style="display:flex;"><span><span style="color:#9893a5"></span>    <span style="color:#286983">const</span> <span style="color:#d7827e">p2</span> <span style="color:#797593">=</span> <span style="color:#d7827e">p</span><span style="color:#797593">.</span><span style="color:#d7827e">then</span><span style="color:#797593">(</span><span style="color:#d7827e">result</span> <span style="color:#797593">=&gt;</span> <span style="color:#797593">{</span>
</span></span><span style="display:flex;"><span>      <span style="color:#d7827e">console</span><span style="color:#797593">.</span><span style="color:#d7827e">log</span><span style="color:#797593">(</span><span style="color:#d7827e">result</span><span style="color:#797593">)</span> <span style="color:#9893a5">// ä¸Šæµ·å¸‚
</span></span></span><span style="display:flex;"><span><span style="color:#9893a5"></span>      <span style="color:#9893a5">// 3ï¼Œ åˆ›å»ºPromiseå¯¹è±¡ æ¨¡æ‹Ÿè¯·æ±‚åŸå¸‚åå­—
</span></span></span><span style="display:flex;"><span><span style="color:#9893a5"></span>      <span style="color:#286983">return</span> <span style="color:#286983">new</span> <span style="color:#d7827e">Promise</span><span style="color:#797593">((</span><span style="color:#d7827e">resolve</span><span style="color:#797593">,</span> <span style="color:#d7827e">reject</span><span style="color:#797593">)</span> <span style="color:#797593">=&gt;</span> <span style="color:#797593">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#d7827e">setTimeout</span><span style="color:#797593">(()</span> <span style="color:#797593">=&gt;</span> <span style="color:#797593">{</span>
</span></span><span style="display:flex;"><span>          <span style="color:#d7827e">resolve</span><span style="color:#797593">(</span><span style="color:#d7827e">result</span> <span style="color:#797593">+</span> <span style="color:#ea9d34">&#39;ä¸Šæµ·å¸‚&#39;</span> <span style="color:#797593">+</span> <span style="color:#ea9d34">&#39;åŸå¸‚&#39;</span><span style="color:#797593">)</span>
</span></span><span style="display:flex;"><span>        <span style="color:#797593">},</span> <span style="color:#ea9d34">2000</span><span style="color:#797593">)</span>
</span></span><span style="display:flex;"><span>      <span style="color:#797593">})</span>
</span></span><span style="display:flex;"><span>    <span style="color:#797593">})</span>
</span></span><span style="display:flex;"><span>    <span style="color:#9893a5">// è·å–åŸå¸‚åå­—
</span></span></span><span style="display:flex;"><span><span style="color:#9893a5"></span>    <span style="color:#d7827e">p2</span><span style="color:#797593">.</span><span style="color:#d7827e">then</span><span style="color:#797593">(</span><span style="color:#d7827e">result</span> <span style="color:#797593">=&gt;</span> <span style="color:#797593">{</span>
</span></span><span style="display:flex;"><span>      <span style="color:#9893a5">// è¿™ä¸ªresulté‡Œé¢æ˜¯ ä¸Šä¸€ä¸ªresolveä¸­ä¼ é€’è¿›æ¥çš„å‚æ•°
</span></span></span><span style="display:flex;"><span><span style="color:#9893a5"></span>      <span style="color:#d7827e">console</span><span style="color:#797593">.</span><span style="color:#d7827e">log</span><span style="color:#797593">(</span><span style="color:#d7827e">result</span><span style="color:#797593">)</span>
</span></span><span style="display:flex;"><span>    <span style="color:#797593">})</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#9893a5">// ä¼šå‘ç° p å’Œ p2 å¹¶ä¸å…¨ç­‰,å°±æ„å‘³ç€then()è¿”å›ä¸€ä¸ªæ–°çš„å¯¹è±¡
</span></span></span><span style="display:flex;"><span><span style="color:#9893a5"></span>    <span style="color:#d7827e">console</span><span style="color:#797593">.</span><span style="color:#d7827e">log</span><span style="color:#797593">(</span><span style="color:#d7827e">p2</span> <span style="color:#797593">===</span> <span style="color:#d7827e">p</span><span style="color:#797593">)</span>
</span></span></code></pre></div><p>æ€»ç»“ï¼š</p>
<ol>
<li>
<p>ä»€ä¹ˆæ˜¯ <code>Promise</code> çš„é“¾å¼è°ƒç”¨ï¼Ÿ</p>
<p>ä½¿ç”¨ <code>then()</code>è¿”å›æ–°çš„<code>Promise</code>å¯¹è±¡ï¼Œä¸€ç›´ä¸²è”ä¸‹å»</p>
</li>
<li>
<p><code>then</code> å›è°ƒå‡½æ•°ä¸­ï¼Œ<code> return</code> çš„å€¼ä¼šä¼ ç»™å“ªé‡Œï¼Ÿ</p>
<p>ä¼ ç»™thenå‡½æ•°ç”Ÿæˆçš„æ–° <code>Promise</code>å¯¹è±¡</p>
</li>
<li>
<p><code>Promise</code>  é“¾å¼è°ƒç”¨ è§£å†³äº† å›è°ƒå‡½æ•°åµŒå¥—é—®é¢˜</p>
</li>
</ol>
<p><img loading="lazy" src="/img/Javascript/image-20240328131153325.png" alt="image-20240328131153325"  />
</p>
<h2 id="4-asyncå‡½æ•°å’Œawait">4. asyncå‡½æ•°å’Œawait<a hidden class="anchor" aria-hidden="true" href="#4-asyncå‡½æ•°å’Œawait">#</a></h2>
<h3 id="1-å®šä¹‰">1. å®šä¹‰<a hidden class="anchor" aria-hidden="true" href="#1-å®šä¹‰">#</a></h3>
<p><code> async()</code> ä½¿ç”¨<code>async</code>å…³é”®å­—å£°æ˜çš„å‡½æ•°ã€‚asyncå‡½æ•°æ˜¯<code>AsyncFunction</code>æ„é€ å‡½æ•°çš„å®ä¾‹ï¼Œå¹¶ä¸”å…¶ä¸­å…è®¸ä½¿ç”¨<code>await</code>å…³é”®å­—ã€‚<code>async</code>å’Œ<code>await</code>å…³é”®å­—è®©æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸€ç§æ›´ç®€æ´çš„æ–¹å¼å†™å‡ºåŸºäºPromiseçš„å¼‚æ­¥è¡Œä¸ºï¼Œè€Œæ— éœ€åˆ»æ„åœ°é“¾å¼è°ƒç”¨<code>promise</code></p>
<h3 id="2-æ¡ˆä¾‹">2. æ¡ˆä¾‹<a hidden class="anchor" aria-hidden="true" href="#2-æ¡ˆä¾‹">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#286983">async</span> <span style="color:#286983">function</span> <span style="color:#d7827e">getDefaultArea</span><span style="color:#797593">(){</span>
</span></span><span style="display:flex;"><span>    <span style="color:#286983">const</span> <span style="color:#d7827e">pObj</span> <span style="color:#797593">=</span> <span style="color:#286983">await</span> <span style="color:#d7827e">axios</span><span style="color:#797593">({</span><span style="color:#d7827e">url</span><span style="color:#797593">:</span><span style="color:#ea9d34">&#39;http://hmajax.itheima.net/api/province&#39;</span><span style="color:#797593">})</span>
</span></span><span style="display:flex;"><span>    <span style="color:#286983">const</span> <span style="color:#d7827e">pname</span> <span style="color:#797593">=</span> <span style="color:#d7827e">pObj</span><span style="color:#797593">.</span><span style="color:#d7827e">data</span><span style="color:#797593">.</span><span style="color:#d7827e">list</span><span style="color:#797593">[</span><span style="color:#ea9d34">0</span><span style="color:#797593">]</span>
</span></span><span style="display:flex;"><span>    <span style="color:#286983">const</span> <span style="color:#d7827e">cObj</span> <span style="color:#797593">=</span> <span style="color:#286983">await</span> <span style="color:#d7827e">axios</span><span style="color:#797593">({</span><span style="color:#d7827e">url</span><span style="color:#797593">:</span><span style="color:#ea9d34">&#39;http://hmajax.itheima.net/api/city&#39;</span><span style="color:#797593">,</span><span style="color:#d7827e">params</span><span style="color:#797593">:</span><span style="color:#797593">{</span><span style="color:#d7827e">pname</span><span style="color:#797593">}})</span>
</span></span><span style="display:flex;"><span>    <span style="color:#286983">const</span> <span style="color:#d7827e">cname</span> <span style="color:#797593">=</span> <span style="color:#d7827e">cObj</span><span style="color:#797593">.</span><span style="color:#d7827e">data</span><span style="color:#797593">.</span><span style="color:#d7827e">list</span><span style="color:#797593">[</span><span style="color:#ea9d34">0</span><span style="color:#797593">]</span>
</span></span><span style="display:flex;"><span>    <span style="color:#286983">const</span> <span style="color:#d7827e">aObj</span> <span style="color:#797593">=</span> <span style="color:#286983">await</span> <span style="color:#d7827e">axios</span><span style="color:#797593">({</span><span style="color:#d7827e">url</span><span style="color:#797593">:</span><span style="color:#ea9d34">&#39;http://hmajax.itheima.net/api/city&#39;</span><span style="color:#797593">,</span><span style="color:#d7827e">params</span><span style="color:#797593">:</span><span style="color:#797593">{</span><span style="color:#d7827e">pname</span><span style="color:#797593">,</span><span style="color:#d7827e">cname</span><span style="color:#797593">}})</span>
</span></span><span style="display:flex;"><span>    <span style="color:#286983">const</span> <span style="color:#d7827e">aname</span> <span style="color:#797593">=</span> <span style="color:#d7827e">aObj</span><span style="color:#797593">.</span><span style="color:#d7827e">data</span><span style="color:#797593">.</span><span style="color:#d7827e">list</span><span style="color:#797593">[</span><span style="color:#ea9d34">0</span><span style="color:#797593">]</span>
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#d7827e">document</span><span style="color:#797593">.</span><span style="color:#d7827e">querySelector</span><span style="color:#797593">(</span><span style="color:#ea9d34">&#39;.province&#39;</span><span style="color:#797593">).</span><span style="color:#d7827e">innerHTML</span> <span style="color:#797593">=</span> <span style="color:#d7827e">pname</span>
</span></span><span style="display:flex;"><span><span style="color:#d7827e">document</span><span style="color:#797593">.</span><span style="color:#d7827e">querySelector</span><span style="color:#797593">(</span><span style="color:#ea9d34">&#39;.city&#39;</span><span style="color:#797593">).</span><span style="color:#d7827e">innerHTML</span> <span style="color:#797593">=</span> <span style="color:#d7827e">cname</span>
</span></span><span style="display:flex;"><span><span style="color:#d7827e">document</span><span style="color:#797593">.</span><span style="color:#d7827e">querySelector</span><span style="color:#797593">(</span><span style="color:#ea9d34">&#39;.area&#39;</span><span style="color:#797593">).</span><span style="color:#d7827e">innerHTML</span> <span style="color:#797593">=</span> <span style="color:#d7827e">aname</span>
</span></span><span style="display:flex;"><span><span style="color:#797593">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#d7827e">getDefaultArea</span><span style="color:#797593">()</span>
</span></span></code></pre></div><h3 id="3-æ­¥éª¤">3. æ­¥éª¤<a hidden class="anchor" aria-hidden="true" href="#3-æ­¥éª¤">#</a></h3>
<p>æ¦‚å¿µï¼š åœ¨ async å‡½æ•°å†…ï¼Œä½¿ç”¨awaitå…³é”®å­—å–ä»£thenå‡½æ•°ï¼Œç­‰å¾…è·å–promiseå¯¹è±¡æˆåŠŸçŠ¶æ€</p>
<ol>
<li>async ä¿®é¥°å‡½æ•°ï¼Œä½¿æ™®é€šå‡½æ•°å˜ä¸ºå¼‚æ­¥å‡½æ•°</li>
<li>await åé¢å¢åŠ å¼‚æ­¥ä»»åŠ¡</li>
<li>await åé¢æˆåŠŸçš„ç»“æœ èµ‹ç»™ å·¦è¾¹çš„å˜é‡</li>
</ol>
<h2 id="5-asyncå‡½æ•°å’Œawait-æ•è·é”™è¯¯">5. asyncå‡½æ•°å’Œawait æ•è·é”™è¯¯<a hidden class="anchor" aria-hidden="true" href="#5-asyncå‡½æ•°å’Œawait-æ•è·é”™è¯¯">#</a></h2>
<h3 id="1-trycatch">1. try&hellip;catch<a hidden class="anchor" aria-hidden="true" href="#1-trycatch">#</a></h3>
<p>â€‹      ä¸€æ—¦åœ¨tryè¿™ä¸ªä»£ç å—ä¸­å‡ºç°é”™è¯¯ï¼Œä¸‹é¢çš„å‡½æ•°éƒ½æ— æ³•æ‰§è¡Œ</p>
<div class="highlight"><pre tabindex="0" style="color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#286983">async</span> <span style="color:#286983">function</span> <span style="color:#d7827e">getDefaultData</span><span style="color:#797593">()</span> <span style="color:#797593">{</span>
</span></span><span style="display:flex;"><span>      <span style="color:#286983">try</span> <span style="color:#797593">{</span>
</span></span><span style="display:flex;"><span>          <span style="color:#9893a5">// 1. try å¯èƒ½äº§ç”Ÿé”™è¯¯çš„ä»£ç 
</span></span></span><span style="display:flex;"><span><span style="color:#9893a5"></span>        <span style="color:#286983">const</span> <span style="color:#d7827e">pObj</span> <span style="color:#797593">=</span> <span style="color:#286983">await</span> <span style="color:#d7827e">axios</span><span style="color:#797593">({</span> <span style="color:#d7827e">url</span><span style="color:#797593">:</span> <span style="color:#ea9d34">&#39;http://hmajax.itheima.net/api/province&#39;</span> <span style="color:#797593">})</span>
</span></span><span style="display:flex;"><span>        <span style="color:#286983">const</span> <span style="color:#d7827e">pname</span> <span style="color:#797593">=</span> <span style="color:#d7827e">pObj</span><span style="color:#797593">.</span><span style="color:#d7827e">data</span><span style="color:#797593">.</span><span style="color:#d7827e">list</span><span style="color:#797593">[</span><span style="color:#ea9d34">0</span><span style="color:#797593">]</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#286983">const</span> <span style="color:#d7827e">cObj</span> <span style="color:#797593">=</span> <span style="color:#286983">await</span> <span style="color:#d7827e">axios</span><span style="color:#797593">({</span> <span style="color:#d7827e">url</span><span style="color:#797593">:</span> <span style="color:#ea9d34">&#39;http://hmajax.itheima.net/api/city&#39;</span><span style="color:#797593">,</span> <span style="color:#d7827e">params</span><span style="color:#797593">:</span> <span style="color:#797593">{</span> <span style="color:#d7827e">pname</span> <span style="color:#797593">}</span> <span style="color:#797593">})</span>
</span></span><span style="display:flex;"><span>        <span style="color:#286983">const</span> <span style="color:#d7827e">cname</span> <span style="color:#797593">=</span> <span style="color:#d7827e">cObj</span><span style="color:#797593">.</span><span style="color:#d7827e">data</span><span style="color:#797593">.</span><span style="color:#d7827e">list</span><span style="color:#797593">[</span><span style="color:#ea9d34">0</span><span style="color:#797593">]</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#286983">const</span> <span style="color:#d7827e">aObj</span> <span style="color:#797593">=</span> <span style="color:#286983">await</span> <span style="color:#d7827e">axios</span><span style="color:#797593">({</span> <span style="color:#d7827e">url</span><span style="color:#797593">:</span> <span style="color:#ea9d34">&#39;http://hmajax.itheima.net/api/area&#39;</span><span style="color:#797593">,</span> <span style="color:#d7827e">params</span><span style="color:#797593">:</span> <span style="color:#797593">{</span> <span style="color:#d7827e">pname</span><span style="color:#797593">,</span> <span style="color:#d7827e">cname</span> <span style="color:#797593">}</span> <span style="color:#797593">})</span>
</span></span><span style="display:flex;"><span>        <span style="color:#286983">const</span> <span style="color:#d7827e">aname</span> <span style="color:#797593">=</span> <span style="color:#d7827e">aObj</span><span style="color:#797593">.</span><span style="color:#d7827e">data</span><span style="color:#797593">.</span><span style="color:#d7827e">list</span><span style="color:#797593">[</span><span style="color:#ea9d34">0</span><span style="color:#797593">]</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#d7827e">document</span><span style="color:#797593">.</span><span style="color:#d7827e">querySelector</span><span style="color:#797593">(</span><span style="color:#ea9d34">&#39;.province&#39;</span><span style="color:#797593">).</span><span style="color:#d7827e">innerHTML</span> <span style="color:#797593">=</span> <span style="color:#d7827e">pname</span>
</span></span><span style="display:flex;"><span>        <span style="color:#d7827e">document</span><span style="color:#797593">.</span><span style="color:#d7827e">querySelector</span><span style="color:#797593">(</span><span style="color:#ea9d34">&#39;.city&#39;</span><span style="color:#797593">).</span><span style="color:#d7827e">innerHTML</span> <span style="color:#797593">=</span> <span style="color:#d7827e">cname</span>
</span></span><span style="display:flex;"><span>        <span style="color:#d7827e">document</span><span style="color:#797593">.</span><span style="color:#d7827e">querySelector</span><span style="color:#797593">(</span><span style="color:#ea9d34">&#39;.area&#39;</span><span style="color:#797593">).</span><span style="color:#d7827e">innerHTML</span> <span style="color:#797593">=</span> <span style="color:#d7827e">aname</span>
</span></span><span style="display:flex;"><span>      <span style="color:#797593">}</span> <span style="color:#286983">catch</span> <span style="color:#797593">(</span><span style="color:#d7827e">error</span><span style="color:#797593">)</span> <span style="color:#797593">{</span>
</span></span><span style="display:flex;"><span>          <span style="color:#9893a5">// 2. æ¥ç€è°ƒç”¨catchå—ï¼Œæ¥æ”¶é”™è¯¯ä¿¡æ¯
</span></span></span><span style="display:flex;"><span><span style="color:#9893a5"></span>          <span style="color:#9893a5">// å¦‚æœtryæŸè¡Œä»£ç æŠ¥é”™åï¼Œtryä¸­å‰©ä½™çš„ä»£ç ä¸ä¼šæ‰§è¡Œ
</span></span></span><span style="display:flex;"><span><span style="color:#9893a5"></span>        <span style="color:#d7827e">cosole</span><span style="color:#797593">.</span><span style="color:#d7827e">dir</span><span style="color:#797593">(</span><span style="color:#d7827e">error</span><span style="color:#797593">.</span><span style="color:#d7827e">response</span><span style="color:#797593">.</span><span style="color:#d7827e">data</span><span style="color:#797593">.</span><span style="color:#d7827e">message</span><span style="color:#797593">)</span>
</span></span><span style="display:flex;"><span>      <span style="color:#797593">}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#797593">}</span>
</span></span></code></pre></div><h2 id="6-äº‹ä»¶å¾ªç¯-eventloop">6. äº‹ä»¶å¾ªç¯ (EventLoop)<a hidden class="anchor" aria-hidden="true" href="#6-äº‹ä»¶å¾ªç¯-eventloop">#</a></h2>
<h3 id="1-æ¦‚å¿µ">1. æ¦‚å¿µ<a hidden class="anchor" aria-hidden="true" href="#1-æ¦‚å¿µ">#</a></h3>
<p>JavaScript æœ‰ä¸€ä¸ª__åŸºäºäº‹ä»¶å¾ªç¯çš„å¹¶å‘æ¨¡å‹__ï¼Œäº‹ä»¶å¾ªç¯è´Ÿè´£æ‰§è¡Œä»£ç ã€æ”¶é›†å’Œå¤„ç†äº‹ä»¶ä»¥åŠæ‰§è¡Œé˜Ÿåˆ—ä¸­çš„å­ä»»åŠ¡ã€‚è¿™ä¸ªæ¨¡å‹ä¸å…¶ä»–è¯­è¨€ä¸­çš„æ¨¡å‹æˆªç„¶ä¸åŒï¼Œæ¯”å¦‚Cå’ŒJava</p>
<h3 id="2-åŸå› ">2. åŸå› <a hidden class="anchor" aria-hidden="true" href="#2-åŸå› ">#</a></h3>
<p>JavaScriptå•çº¿ç¨‹ï¼ˆæŸä¸€åˆ»åªèƒ½æ‰§è¡Œä¸€è¡Œä»£ç ï¼‰ï¼Œä¸ºäº†è®©è€—æ—¶ä»£ç ä¸é˜»å¡å…¶ä»–ä»£ç è¿è¡Œï¼Œè®¾è®¡äº†äº‹ä»¶å¾ªç¯æ¨¡å‹</p>
<h3 id="3-æ‰§è¡Œè¿‡ç¨‹">3. æ‰§è¡Œè¿‡ç¨‹<a hidden class="anchor" aria-hidden="true" href="#3-æ‰§è¡Œè¿‡ç¨‹">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#d7827e">console</span><span style="color:#797593">.</span><span style="color:#d7827e">log</span><span style="color:#797593">(</span><span style="color:#ea9d34">1</span><span style="color:#797593">)</span>  <span style="color:#9893a5">// è°ƒç”¨æ ˆ
</span></span></span><span style="display:flex;"><span><span style="color:#9893a5"></span><span style="color:#d7827e">setTimeout</span><span style="color:#797593">(()=&gt;{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#d7827e">console</span><span style="color:#797593">.</span><span style="color:#d7827e">log</span><span style="color:#797593">(</span><span style="color:#ea9d34">2</span><span style="color:#797593">)</span>
</span></span><span style="display:flex;"><span><span style="color:#797593">},</span><span style="color:#ea9d34">0</span><span style="color:#797593">)</span> <span style="color:#9893a5">// å®¿ä¸»ç¯å¢ƒ
</span></span></span><span style="display:flex;"><span><span style="color:#9893a5"></span><span style="color:#d7827e">console</span><span style="color:#797593">.</span><span style="color:#d7827e">log</span><span style="color:#797593">(</span><span style="color:#ea9d34">3</span><span style="color:#797593">)</span>
</span></span><span style="display:flex;"><span><span style="color:#d7827e">setTimeout</span><span style="color:#797593">(()=&gt;{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#d7827e">console</span><span style="color:#797593">.</span><span style="color:#d7827e">log</span><span style="color:#797593">(</span><span style="color:#ea9d34">4</span><span style="color:#797593">)</span>
</span></span><span style="display:flex;"><span><span style="color:#797593">},</span><span style="color:#ea9d34">2000</span><span style="color:#797593">)</span>
</span></span><span style="display:flex;"><span><span style="color:#d7827e">console</span><span style="color:#797593">.</span><span style="color:#d7827e">log</span><span style="color:#797593">(</span><span style="color:#ea9d34">5</span><span style="color:#797593">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#9893a5">// æ§åˆ¶å°è¾“å‡ºï¼š 1 3 5 2 4
</span></span></span></code></pre></div><p>è¿˜æ˜¯çœ‹ä¸€ä¸‹è€å¸ˆçš„è§†é¢‘è®²è§£ï¼Œæ¯”è¾ƒæ¸…æ™°ã€‚å¤§è‡´æ­¥éª¤æ˜¯ï¼šæ™®é€šçš„éå¼‚æ­¥å‡½æ•°ï¼ˆç«‹å³æ‰§è¡Œå‡½æ•°ï¼‰åœ¨è°ƒç”¨æ ˆå†…æ‰§è¡Œï¼›å¼‚æ­¥å‡½æ•°åœ¨å®¿ä¸»ç¯å¢ƒï¼ˆæµè§ˆå™¨ï¼‰ä¸­ç­‰å¾…æ‰§è¡Œå¹¶åŠ å…¥ä»»åŠ¡é˜Ÿåˆ—ï¼Œå¦‚æœè°ƒç”¨æ ˆå†…ä»»åŠ¡æ‰§è¡Œå®Œæ¯•ï¼Œ ä¼šå¾ªç¯åå¤çš„æŸ¥æ‰¾ä»»åŠ¡é˜Ÿåˆ—çš„å›è°ƒå‡½æ•°æ‰§è¡Œã€‚</p>
<!DOCTYPE HTML>
<html lang="en">

<head>
    <style type="text/css">
        .bilibili_shortcodes {
            position: relative;
            width: 100%;
            height: 0;
            padding-bottom: 66%;
            margin: auto;
            overflow: hidden;
            text-align: center;
        }

        .bilibili_shortcodes iframe {
            position: absolute;
            width: 100%;
            height: 100%;
            left: 0;
            top: 0;
        }
    </style>
    <title></title>
</head>

<body>
    <div class="bilibili_shortcodes">
        <iframe
            src="https://player.bilibili.com/player.html?bvid=BV1MN411y7pw&page=1&high_quality=1&danmaku=0&as_wide=0"
            scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true">
        </iframe>
    </div>
</body>

</html>
<h3 id="4-æ€»ç»“">4. æ€»ç»“<a hidden class="anchor" aria-hidden="true" href="#4-æ€»ç»“">#</a></h3>
<ol>
<li>
<p>ä»€ä¹ˆæ˜¯äº‹ä»¶å¾ªç¯ï¼Ÿ</p>
<p>æ‰§è¡Œä»£ç å’Œæ”¶é›†å¼‚æ­¥ä»»åŠ¡ï¼Œåœ¨è°ƒç”¨æ ˆç©ºé—²æ—¶ï¼Œåå¤è°ƒç”¨ä»»åŠ¡é˜Ÿåˆ—é‡Œå›è°ƒå‡½æ•°æ‰§è¡Œæœºåˆ¶</p>
</li>
<li>
<p>ä¸ºä»€ä¹ˆæœ‰äº‹ä»¶å¾ªç¯ï¼Ÿ</p>
<p>JavaScript æ˜¯å•çº¿ç¨‹ï¼Œä¸ºäº†ä¸é˜»å¡JSå¼•æ“ï¼Œè®¾è®¡æ‰§è¡Œä»£ç çš„æ¨¡å‹</p>
</li>
<li>
<p>JavaScript å†…ä»£ç å¦‚ä½•æ‰§è¡Œï¼Ÿ</p>
<ul>
<li>
<p>æ‰§è¡ŒåŒæ­¥ä»£ç ï¼Œé‡åˆ°å¼‚æ­¥ä»£ç äº¤ç»™å®¿ä¸»æµè§ˆå™¨ç¯å¢ƒæ‰§è¡Œ</p>
</li>
<li>
<p>å¼‚æ­¥æœ‰äº†ç»“æœåï¼ŒæŠŠå›è°ƒå‡½æ•°æ”¾å…¥ä»»åŠ¡é˜Ÿåˆ—æ’é˜Ÿ</p>
</li>
<li>
<p>å½“è°ƒç”¨æ ˆç©ºé—²åï¼Œåå¤è°ƒç”¨ä»»åŠ¡é˜Ÿåˆ—é‡Œé¢çš„å›è°ƒå‡½æ•°</p>
</li>
</ul>
</li>
</ol>
<h2 id="7-å®ä»»åŠ¡ä¸å¾®ä»»åŠ¡">7. å®ä»»åŠ¡ä¸å¾®ä»»åŠ¡<a hidden class="anchor" aria-hidden="true" href="#7-å®ä»»åŠ¡ä¸å¾®ä»»åŠ¡">#</a></h2>
<blockquote>
<p>ES6 ä¹‹åå¼•å…¥Promiseå¯¹è±¡ï¼Œè®©JSå¼•æ“ä¹Ÿå¯ä»¥å‘èµ·å¼‚æ­¥ä»»åŠ¡</p>
</blockquote>
<p>å¼‚æ­¥ä»»åŠ¡åˆ†ä¸ºï¼š</p>
<ul>
<li>å®ä»»åŠ¡ï¼š ç”±æµè§ˆå™¨ç¯å¢ƒæ‰§è¡Œçš„å¼‚æ­¥ä»£ç </li>
<li>å¾®ä»»åŠ¡ï¼šç”± JS å¼•æ“ç¯å¢ƒæ‰§è¡Œçš„å¼‚æ­¥ä»£ç </li>
</ul>
<p><img loading="lazy" src="/img/Javascript/image-20240328161951410.png" alt="image-20240328161951410"  />
</p>
<table>
<thead>
<tr>
<th>ä»»åŠ¡ï¼ˆä»£ç ï¼‰</th>
<th>æ‰§è¡Œæ‰€åœ¨ç¯å¢ƒ</th>
</tr>
</thead>
<tbody>
<tr>
<td>JS è„šæœ¬æ‰§è¡Œäº‹ä»¶ (script)</td>
<td>æµè§ˆå™¨</td>
</tr>
<tr>
<td>setTimeour/setInterval</td>
<td>æµè§ˆå™¨</td>
</tr>
<tr>
<td>AJAX è¯·æ±‚å®Œæˆäº‹ä»¶</td>
<td>æµè§ˆå™¨</td>
</tr>
<tr>
<td>ç”¨æˆ·äº¤äº’äº‹ä»¶ç­‰ç­‰</td>
<td>æµè§ˆå™¨</td>
</tr>
<tr>
<td>Promiseå¯¹è±¡.then()</td>
<td>JSå¼•æ“</td>
</tr>
</tbody>
</table>
<blockquote>
<p>Promise æœ¬èº«æ˜¯åŒæ­¥çš„ï¼Œè€Œthen å’Œ catch å›è°ƒå‡½æ•°æ˜¯å¼‚æ­¥çš„</p>
</blockquote>
<div class="highlight"><pre tabindex="0" style="color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#d7827e">console</span><span style="color:#797593">.</span><span style="color:#d7827e">log</span><span style="color:#797593">(</span><span style="color:#ea9d34">1</span><span style="color:#797593">)</span>
</span></span><span style="display:flex;"><span><span style="color:#d7827e">setTimeout</span><span style="color:#797593">(()=&gt;{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#d7827e">console</span><span style="color:#797593">.</span><span style="color:#d7827e">log</span><span style="color:#797593">(</span><span style="color:#ea9d34">2</span><span style="color:#797593">)</span>
</span></span><span style="display:flex;"><span><span style="color:#797593">},</span><span style="color:#ea9d34">0</span><span style="color:#797593">)</span>
</span></span><span style="display:flex;"><span><span style="color:#286983">const</span> <span style="color:#d7827e">p</span> 
</span></span></code></pre></div><h3 id="1-æ€»ç»“">1. æ€»ç»“<a hidden class="anchor" aria-hidden="true" href="#1-æ€»ç»“">#</a></h3>
<ol>
<li>
<p>ä»€ä¹ˆæ˜¯å®ä»»åŠ¡ï¼Ÿ</p>
<p>æµè§ˆå™¨æ‰§è¡Œçš„å¼‚æ­¥ä»£ç </p>
<p>ä¾‹å¦‚ï¼š JS æ‰§è¡Œè„šæœ¬äº‹ä»¶  <code>setTimeout/setInterva</code>ï¼ŒAJAXè¯·æ±‚å®Œæˆäº‹ä»¶ï¼Œç”¨æˆ·äº¤äº’äº‹ä»¶ç­‰ç­‰</p>
</li>
<li>
<p>ä»€ä¹ˆæ˜¯å¾®ä»»åŠ¡ï¼Ÿ</p>
<p>JS å¼•æ“æ‰§è¡Œçš„å¼‚æ­¥ä»£ç </p>
<p>ä¾‹å¦‚ï¼š Promiseå¯¹è±¡.then() çš„å›è°ƒ</p>
</li>
<li>
<p>JavaScript å†…éƒ¨ä»£ç å¦‚ä½•æ‰§è¡Œï¼Ÿ</p>
<p>æ‰§è¡Œç¬¬ä¸€ä¸ªscriptè„šæœ¬äº‹ä»¶å®ä»»åŠ¡é‡Œé¢çš„åŒæ­¥ä»£ç </p>
<p>é‡åˆ°å®ä»»åŠ¡/å¾®ä»»åŠ¡ äº¤ç»™å®¿ä¸»ç¯å¢ƒï¼ˆæµè§ˆå™¨/JSå¼•æ“ï¼‰ï¼Œæ‰§è¡Œåçš„å›è°ƒå‡½æ•°åˆ†åˆ«æ”¾åœ¨ ã€å¾®ä»»åŠ¡é˜Ÿåˆ—/å®ä»»åŠ¡é˜Ÿåˆ—ã€‘</p>
<p>å½“æ‰§è¡Œæ ˆç©ºé—²æ—¶ï¼Œæ¸…ç©ºå¾®ä»»åŠ¡é˜Ÿåˆ—ï¼Œå†æ‰§è¡Œä¸‹ä¸€ä¸ªå®ä»»åŠ¡&hellip;.</p>
</li>
</ol>
<h2 id="8-promiseall-é™æ€æ–¹æ³•">8. Promise.all é™æ€æ–¹æ³•<a hidden class="anchor" aria-hidden="true" href="#8-promiseall-é™æ€æ–¹æ³•">#</a></h2>
<h3 id="1-æ¦‚å¿µ-1">1. æ¦‚å¿µï¼š<a hidden class="anchor" aria-hidden="true" href="#1-æ¦‚å¿µ-1">#</a></h3>
<p>åˆå¹¶å¤šä¸ªPromiseå¯¹è±¡ï¼Œç­‰å¾…æ‰€æœ‰åŒæ—¶æˆåŠŸå®Œæˆï¼ˆæˆ–æŸä¸€ä¸ªå¤±è´¥ï¼‰ï¼Œåšåç»­é€»è¾‘</p>
<p><img loading="lazy" src="/img/Javascript/image-20240328165206817.png" alt="image-20240328165206817"  />
</p>
<div class="highlight"><pre tabindex="0" style="color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#286983">const</span> <span style="color:#d7827e">p</span> <span style="color:#797593">=</span> <span style="color:#d7827e">Promise</span><span style="color:#797593">.</span><span style="color:#d7827e">all</span><span style="color:#797593">([</span><span style="color:#d7827e">Promiseå¯¹è±¡</span><span style="color:#797593">,</span> <span style="color:#d7827e">Promiseå¯¹è±¡</span><span style="color:#797593">,</span> <span style="color:#797593">...])</span>
</span></span><span style="display:flex;"><span>    <span style="color:#d7827e">p</span><span style="color:#797593">.</span><span style="color:#d7827e">then</span><span style="color:#797593">(</span><span style="color:#d7827e">result</span> <span style="color:#797593">=&gt;</span> <span style="color:#797593">{</span>
</span></span><span style="display:flex;"><span>      <span style="color:#9893a5">// result ç»“æœï¼š[Promiseå¯¹è±¡æˆåŠŸç»“æœ, Promiseå¯¹è±¡æˆåŠŸç»“æœ, ...]
</span></span></span><span style="display:flex;"><span><span style="color:#9893a5"></span>    <span style="color:#797593">}).</span><span style="color:#286983">catch</span><span style="color:#797593">(</span><span style="color:#d7827e">error</span> <span style="color:#797593">=&gt;</span> <span style="color:#797593">{</span>
</span></span><span style="display:flex;"><span>      <span style="color:#9893a5">// å¤±è´¥çš„promiseå¯¹è±¡ æŠ›å‡ºçš„å¼‚å¸¸
</span></span></span><span style="display:flex;"><span><span style="color:#9893a5"></span>    <span style="color:#797593">})</span>
</span></span></code></pre></div><h1 id="è¡¥å……-éªŒè¯ç æµç¨‹">è¡¥å…… éªŒè¯ç æµç¨‹<a hidden class="anchor" aria-hidden="true" href="#è¡¥å……-éªŒè¯ç æµç¨‹">#</a></h1>
<p><img loading="lazy" src="/img/Javascript/image-20240329004645316.png" alt="image-20240329004645316"  />
</p>
<h2 id="1-token">1. token<a hidden class="anchor" aria-hidden="true" href="#1-token">#</a></h2>
<blockquote>
<p>è®¿é—®æƒé™ä»¤ç‰Œï¼Œæœ¬è´¨æ˜¯ä¸€ä¸²å­—ç¬¦ä¸²</p>
</blockquote>
<ul>
<li>åˆ›å»ºï¼š æ­£ç¡®ç™»å½•åï¼Œç”±åç«¯ç­¾å‘è¿”å›</li>
<li>ä½œç”¨ï¼šåˆ¤æ–­æ˜¯å¦æœ‰ç™»å½•çŠ¶æ€ç­‰ï¼Œæ§åˆ¶è®¿é—®æƒé™</li>
</ul>
<p>æ³¨æ„ï¼š å‰ç«¯æ™ºèƒ½åˆ¤æ–­ token æ˜¯å¦å­˜åœ¨ï¼Œè€Œåç«¯æ‰èƒ½åˆ¤æ–­tokençš„æœ‰æ•ˆæ€§</p>
<p><img loading="lazy" src="/img/Javascript/image-20240329004928001.png" alt="image-20240329004928001"  />
</p>


  </div>

  

  

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://jingyiwu-codespace.github.io/zh/tags/ajax/">AJAX</a></li>
      <li><a href="https://jingyiwu-codespace.github.io/zh/tags/vub/">VUB</a></li>
      <li><a href="https://jingyiwu-codespace.github.io/zh/tags/frontend/">Frontend</a></li>
    </ul>



<details>
    <summary>View/hide comments</summary>
    <div class="giscus">
        <meta http-equiv="Content-Security-Policy" content="script-src 'unsafe-eval'; object-src 'none'; ">
        <script nonce="${nonce}">

            function getGiscusTheme() {
                
                const preferredTheme = localStorage.getItem("pref-theme");
                
                let giscusTheme;
                switch (preferredTheme) {
                    case "light":
                        giscusTheme = "noborder_light";
                        break;
                    case "dark":
                        giscusTheme = "noborder_gray";
                        break;
                    default:
                        giscusTheme = "noborder_gray"; 
                }
                return giscusTheme;
            }
            function setGiscusTheme() {
                function sendMessage(message) {
                    const iframe = document.querySelector('iframe.giscus-frame');
                    if (!iframe) return;
                    iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
                }
                
                sendMessage({
                    setConfig: {
                        theme: getGiscusTheme(),
                    },
                });
            }

            const attrs = {
                "src": "https://giscus.app/client.js",
                "data-repo": "JingyiWu-codespace/JingyiWu-codespace.github.io",
                "data-repo-id": "R_kgDOLEfUzQ",
                "data-category": "Announcements",
                "data-category-id": "DIC_kwDOLEfUzc4CdFiN",
                "data-mapping": "pathname",
                "data-strict": "0",
                "data-reactions-enabled": "1",
                "data-emit-metadata": "0",
                "data-input-position": "bottom",
                "data-theme": getGiscusTheme(), 
                "data-lang": "en",
                "crossorigin": "anonymous",
                "async": ""
            };

            const giscusScript = document.createElement("script");
            Object.entries(attrs).forEach(([key, value]) => giscusScript.setAttribute(key, value));
            document.body.appendChild(giscusScript);

            
            const toggle = document.querySelector('#theme-toggle');
            if (toggle) {
                toggle.addEventListener('click', setGiscusTheme);
            }
        </script>

        <noscript>Please enable JavaScript to view the comments</noscript>
    </div>

</details>




<nav class="paginav">
  <a class="prev" href="https://jingyiwu-codespace.github.io/zh/posts/tech/node.jswebpack/">
    <span class="title">Â« ä¸Šä¸€é¡µ</span>
    <br>
    <span>å­¦ä¹ ï¼šNode.js &amp; Webpack </span>
  </a>
  <a class="next" href="https://jingyiwu-codespace.github.io/zh/posts/tech/javascript_advanced/">
    <span class="title">ä¸‹ä¸€é¡µ Â»</span>
    <br>
    <span>å­¦ä¹ : JavaScript è¿›é˜¶ç¯‡</span>
  </a>
</nav>


  </footer>

</article>
    </main>
    
<footer class="footer">
    <span>
        &copy;
        2024
        <a href="https://jingyiwu-codespace.github.io" rel="noopener noreferrer" target="_blank">Jingyi's Blog</a>
<span class="busuanzi-footer">
  <span id="busuanzi_container_site_pv">
    Views: <span id="busuanzi_value_site_pv"></span>
  </span>
  <span id="busuanzi_container_site_uv">
    Visitors: <span id="busuanzi_value_site_uv"></span>
  </span>
</span>

<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    </span>
    


</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>


<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script></body>

</html>